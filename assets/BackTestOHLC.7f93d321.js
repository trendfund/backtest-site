import{f7 as Br,fj as Fr,r as zr,f8 as ni,o as Vr,ff as jr,a as Ct,e as Hr,b as Yt,c as he,w as at,d as Ot,f as ii,u as Dt,fp as Wt,t as Se,g as ri,i as ai,F as oi,fw as Nr,fx as Yr,fn as Wr,j as Xr}from"./index.f9543b85.js";import{c as Gr,r as Ur}from"./index.f2cbcae4.js";var Ze={exports:{}},Ke={exports:{}};/**
 * @license
 * KLineChart v8.3.6
 * Copyright (c) 2019 lihu.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */(function(te,ee){(function(St,Lt){Lt(ee)})(Br,function(St){var Lt={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldCheckParamCount:!0,shouldOhlc:!0,plots:[{key:"bbi",title:"BBI: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=Math.max.apply(null,n),i=[],a=[];return r.map(function(o,c){var s={},h=o.close;if(n.forEach(function(u,f){i[f]=(i[f]||0)+h,u-1>c||(a[f]=i[f]/u,i[f]-=r[c-(u-1)].close)}),c>=e-1){var l=0;a.forEach(function(u){l+=u}),s.bbi=l/4}return s})}},Xt={name:"DMA",shortName:"DMA",calcParams:[10,50,10],plots:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=Math.max(n[0],n[1]),i=0,a=0,o=0,c=[];return r.forEach(function(s,h){var l,u,f={},d=s.close;if(i+=d,a+=d,n[0]-1>h||(l=i/n[0],i-=r[h-(n[0]-1)].close),n[1]-1>h||(u=a/n[1],a-=r[h-(n[1]-1)].close),h>=e-1){var v=l-u;f.dma=v,o+=v,e+n[2]-2>h||(f.ama=o/n[2],o-=c[h-(n[2]-1)].dma)}c.push(f)}),c}},q={name:"DMI",shortName:"DMI",calcParams:[14,6],plots:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=0,o=0,c=0,s=0,h=0,l=0,u=[];return r.forEach(function(f,d){var v={},p=r[d-1]||f,_=p.close,m=f.high,y=f.low,g=m-y,k=Math.abs(m-_),C=Math.abs(_-y),M=m-p.high,B=p.low-y,X=Math.max(Math.max(g,k),C),wt=M>0&&M>B?M:0,it=B>0&&B>M?B:0;if(e+=X,i+=wt,a+=it,d>=n[0]-1){d>n[0]-1?(o=o-o/n[0]+X,c=c-c/n[0]+wt,s=s-s/n[0]+it):(o=e,c=i,s=a);var K=0,H=0;o!==0&&(K=100*c/o,H=100*s/o),v.pdi=K,v.mdi=H;var Q=0;H+K!==0&&(Q=Math.abs(H-K)/(H+K)*100),h+=Q,2*n[0]-2>d||(v.adx=l=d>2*n[0]-2?(l*(n[0]-1)+Q)/n[0]:h/n[0],2*n[0]+n[1]-3>d||(v.adxr=(u[d-(n[1]-1)].adx+l)/2))}u.push(v)}),u}},pt={name:"MACD",shortName:"MACD",calcParams:[12,26,9],plots:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,color:function(r,t){var n=(r.current.technicalIndicatorData||{}).macd;return n>0?t.bar.upColor:0>n?t.bar.downColor:t.bar.noChangeColor},isStroke:function(r){return(r.current.technicalIndicatorData||{}).macd>(r.prev.technicalIndicatorData||{}).macd}}],calcTechnicalIndicator:function(r,t){var n,e,i=t.params,a=0,o=0,c=0,s=0,h=Math.max(i[0],i[1]);return r.map(function(l,u){var f={},d=l.close;return a+=d,i[0]-1>u||(n=u>i[0]-1?(2*d+(i[0]-1)*n)/(i[0]+1):a/i[0]),i[1]-1>u||(e=u>i[1]-1?(2*d+(i[1]-1)*e)/(i[1]+1):a/i[1]),h-1>u||(f.dif=o=n-e,c+=o,h+i[2]-2>u||(f.macd=2*(o-(s=u>h+i[2]-2?(2*o+s*(i[2]-1))/(i[2]+1):c/i[2])),f.dea=s)),f})}},ke={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],plots:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=Math.ceil(n[1]/2.5+1),i=Math.ceil(n[2]/2.5+1),a=Math.ceil(n[3]/2.5+1),o=Math.ceil(n[4]/2.5+1),c=0,s=[],h=0,l=[],u=0,f=[],d=0,v=[],p=[];return r.forEach(function(_,m){var y={},g=r[m-1]||_,k=(g.high+g.close+g.low+g.open)/4,C=Math.max(0,_.high-k),M=Math.max(0,k-_.low);n[0]-1>m||(y.cr=M!==0?C/M*100:0,c+=y.cr,h+=y.cr,u+=y.cr,d+=y.cr,n[0]+n[1]-2>m||(s.push(c/n[1]),n[0]+n[1]+e-3>m||(y.ma1=s[s.length-1-e]),c-=p[m-(n[1]-1)].cr),n[0]+n[2]-2>m||(l.push(h/n[2]),n[0]+n[2]+i-3>m||(y.ma2=l[l.length-1-i]),h-=p[m-(n[2]-1)].cr),n[0]+n[3]-2>m||(f.push(u/n[3]),n[0]+n[3]+a-3>m||(y.ma3=f[f.length-1-a]),u-=p[m-(n[3]-1)].cr),n[0]+n[4]-2>m||(v.push(d/n[4]),n[0]+n[4]+o-3>m||(y.ma4=v[v.length-1-o]),d-=p[m-(n[4]-1)].cr)),p.push(y)}),p}},be={name:"AO",shortName:"AO",calcParams:[5,34],shouldCheckParamCount:!0,plots:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,color:function(r,t){return(r.current.technicalIndicatorData||{}).ao>(r.prev.technicalIndicatorData||{}).ao?t.bar.upColor:t.bar.downColor},isStroke:function(r){return(r.current.technicalIndicatorData||{}).ao>(r.prev.technicalIndicatorData||{}).ao}}],calcTechnicalIndicator:function(r,t){var n=t.params,e=Math.max(n[0],n[1]),i=0,a=0,o=0,c=0;return r.map(function(s,h){var l={},u=(s.low+s.high)/2;if(i+=u,a+=u,h>=n[0]-1){o=i/n[0];var f=r[h-(n[0]-1)];i-=(f.low+f.high)/2}if(h>=n[1]-1){c=a/n[1];var d=r[h-(n[1]-1)];a-=(d.low+d.high)/2}return e-1>h||(l.ao=o-c),l})}},_t={name:"CCI",shortName:"CCI",calcParams:[20],plots:[{key:"cci",title:"CCI: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=n[0]-1,i=0,a=[];return r.map(function(o,c){var s={},h=(o.high+o.low+o.close)/3;if(i+=h,a.push(h),c>=e){var l=i/n[0],u=a.slice(c-e,c+1),f=0;u.forEach(function(v){f+=Math.abs(v-l)});var d=f/n[0];s.cci=d!==0?(h-l)/d/.015:0,i-=(r[c-e].high+r[c-e].low+r[c-e].close)/3}return s})}},ot={name:"RSI",shortName:"RSI",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regeneratePlots:function(r){return r.map(function(t,n){var e=n+1;return{key:"rsi".concat(e),title:"RSI".concat(e,": "),type:"line"}})},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots,i=[],a=[];return r.map(function(o,c){var s={},h=o.close-(r[c-1]||o).close;return n.forEach(function(l,u){if(h>0?i[u]=(i[u]||0)+h:a[u]=(a[u]||0)+Math.abs(h),c>=l-1){s[e[u].key]=a[u]!==0?100-100/(1+i[u]/a[u]):0;var f=r[c-(l-1)],d=f.close-(r[c-l]||f).close;d>0?i[u]-=d:a[u]-=Math.abs(d)}}),s})}};function mt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER;return r.forEach(function(e){t=Math.max(e.high,t),n=Math.min(e.low,n)}),{hn:t,ln:n}}var $={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],plots:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=[];return r.forEach(function(i,a){var o={},c=i.close;if(a>=n[0]-1){var s=mt(r.slice(a-(n[0]-1),a+1)),h=s.ln,l=s.hn-h;o.k=((n[1]-1)*(e[a-1].k||50)+(c-h)/(l===0?1:l)*100)/n[1],o.d=((n[2]-1)*(e[a-1].d||50)+o.k)/n[2],o.j=3*o.k-2*o.d}e.push(o)}),e}},yt={name:"WR",shortName:"WR",calcParams:[6,10,14],shouldCheckParamCount:!1,plots:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regeneratePlots:function(r){return r.map(function(t,n){return{key:"wr".concat(n+1),title:"WR".concat(n+1,": "),type:"line"}})},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots;return r.map(function(i,a){var o={},c=i.close;return n.forEach(function(s,h){var l=s-1;if(a>=l){var u=mt(r.slice(a-l,a+1)),f=u.hn,d=f-u.ln;o[e[h].key]=d===0?0:(c-f)/d*100}}),o})}},ne={name:"BOLL",shortName:"BOLL",calcParams:[20,{value:2,allowDecimal:!0}],precision:2,shouldOhlc:!0,plots:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=n[0]-1,i=0;return r.map(function(a,o){var c={};if(i+=a.close,o>=e){c.mid=i/n[0];var s=function(h,l){var u=h.length,f=0;h.forEach(function(p){var _=p.close-l;f+=_*_});var d=f>0,v=Math.sqrt((f=Math.abs(f))/u);return d?v:-1*v}(r.slice(o-e,o+1),c.mid);c.up=c.mid+n[1]*s,c.dn=c.mid-n[1]*s,i-=r[o-e].close}return c})}},Gt={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,plots:[{key:"sar",title:"SAR: ",type:"circle",color:function(r,t){var n=r.current,e=n.kLineData||{};return(e.high+e.low)/2>(n.technicalIndicatorData||{}).sar?t.circle.upColor:t.circle.downColor}}],calcTechnicalIndicator:function(r,t){var n=t.params,e=n[0]/100,i=n[1]/100,a=n[2]/100,o=e,c=-100,s=!1,h=0;return r.map(function(l,u){var f=h,d=l.high,v=l.low;if(s){(c===-100||d>c)&&(c=d,o=Math.min(o+i,a)),h=f+o*(c-f);var p=Math.min(r[Math.max(1,u)-1].low,v);h>l.low?(h=c,o=e,c=-100,s=!s):h>p&&(h=p)}else{(c===-100||c>v)&&(c=v,o=Math.min(o+i,a)),h=f+o*(c-f);var _=Math.max(r[Math.max(1,u)-1].high,d);l.high>h?(h=c,o=0,c=-100,s=!s):_>h&&(h=_)}return{sar:h}})}},L={technicalIndicatorExtensions:{},shapeExtensions:{},addTechnicalIndicatorTemplate:function(r){var t=this;r&&[].concat(r).forEach(function(n){n.name&&(t.technicalIndicatorExtensions[n.name]=n)})},addShapeTemplate:function(r){var t=this;r&&[].concat(r).forEach(function(n){n.name&&(t.shapeExtensions[n.name]=n)})}};function E(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(r,t){for(var n=0;t.length>n;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function I(r,t,n){return t&&kt(r.prototype,t),n&&kt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Rt(r){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(r)}function Et(r,t){if(R(r)&&R(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&n in r){var e=r[n],i=t[n];R(i)&&R(e)&&!V(i)&&!V(e)?Et(e,i):P(t[n])&&(r[n]=t[n])}}}function Z(r){if(!R(r))return r;var t;for(var n in t=V(r)?[]:{},r)if(Object.prototype.hasOwnProperty.call(r,n)){var e=r[n];t[n]=R(e)?Z(e):e}return t}function V(r){return Object.prototype.toString.call(r)==="[object Array]"}function W(r){return r&&typeof r=="function"}function R(r){return!!r&&Rt(r)==="object"}function O(r){return typeof r=="number"&&!isNaN(r)}function P(r){return r!=null}function bt(r){return typeof r=="boolean"}function ie(r){return typeof r=="string"}var we="stroke",le="fill",et="dash",Ee="solid",Ut="left",$e="right",Je="normal",Bt="percentage",Zt="log",Qe="candle_solid",si="candle_stroke",ci="candle_up_stroke",hi="candle_down_stroke",li="ohlc",tn="area",Pe="always",ui="follow_cross",en="rect",ue="standard",nn="circle",rn="rect",an="triangle",Ce="diamond",on="custom",sn="point",Ae="top",cn="bottom",fi={grid:{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:et,dashValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:et,dashValue:[2,2]}},candle:{margin:{top:.2,bottom:.1},type:Qe,bar:{upColor:"#26A69A",downColor:"#EF5350",noChangeColor:"#999999"},area:{lineSize:2,lineColor:"#2196F3",value:"close",backgroundColor:[{offset:0,color:"rgba(33, 150, 243, 0.01)"},{offset:1,color:"rgba(33, 150, 243, 0.2)"}]},priceMark:{show:!0,high:{show:!0,color:"#76808F",textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},low:{show:!0,color:"#76808F",textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},last:{show:!0,upColor:"#26A69A",downColor:"#EF5350",noChangeColor:"#888888",line:{show:!0,style:et,dashValue:[4,4],size:1},text:{show:!0,size:12,paddingLeft:2,paddingTop:2,paddingRight:2,paddingBottom:2,color:"#FFFFFF",family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{showRule:Pe,showType:ue,labels:["\u65F6\u95F4: ","\u5F00: ","\u6536: ","\u9AD8: ","\u4F4E: ","\u6210\u4EA4\u91CF: "],values:null,defaultValue:"n/a",rect:{paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:6,offsetLeft:8,offsetTop:8,offsetRight:8,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",backgroundColor:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginLeft:8,marginTop:6,marginRight:8,marginBottom:0}}},technicalIndicator:{margin:{top:.2,bottom:.1},bar:{upColor:"rgba(38, 166, 154, .65)",downColor:"rgba(239, 83, 80, .65)",noChangeColor:"#888888"},line:{size:1,colors:["#FF9600","#9D65C9","#2196F3","#E11D74","#01C5C4"]},circle:{upColor:"rgba(38, 166, 154, .65)",downColor:"rgba(239, 83, 80, .65)",noChangeColor:"#888888"},lastValueMark:{show:!1,text:{show:!1,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:3,paddingTop:2,paddingRight:3,paddingBottom:2,borderRadius:2}},tooltip:{showRule:Pe,showType:ue,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:"#76808F",marginTop:6,marginRight:8,marginBottom:0,marginLeft:8}}},xAxis:{show:!0,height:null,axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",paddingTop:3,paddingBottom:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},yAxis:{show:!0,width:null,type:Je,position:$e,inside:!1,axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:"#76808F",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:3,paddingRight:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}},separator:{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:"rgba(33, 150, 243, 0.08)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:et,dashValue:[4,2],size:1,color:"#76808F"},text:{show:!0,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderColor:"#686D76",borderRadius:2,backgroundColor:"#686D76"}},vertical:{show:!0,line:{show:!0,style:et,dashValue:[4,2],size:1,color:"#76808F"},text:{show:!0,color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderRadius:2,borderColor:"#686D76",backgroundColor:"#686D76"}}},shape:{point:{backgroundColor:"#2196F3",borderColor:"rgba(33, 150, 243, 0.35)",borderSize:1,radius:5,activeBackgroundColor:"#2196F3",activeBorderColor:"rgba(33, 150, 243, 0.35)",activeBorderSize:3,activeRadius:5},line:{style:Ee,color:"#2196F3",size:1,dashValue:[2,2]},polygon:{style:we,stroke:{style:Ee,size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"#2196F3"}},arc:{style:we,stroke:{style:Ee,size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"#2196F3"}},text:{style:le,color:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",offset:[0,0]}},annotation:{position:Ae,offset:[20,0],symbol:{type:Ce,size:8,color:"#2196F3",activeSize:10,activeColor:"#FF9600"}},tag:{position:sn,offset:0,line:{show:!0,style:et,dashValue:[4,2],size:1,color:"#2196F3"},text:{color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"},mark:{offset:0,color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"}}};function gt(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"--";if(R(r)){var e=r[t];if(P(e))return e}return n}function st(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"MM-DD hh:mm";if(O(t)){var e=r.format(new Date(t)),i=e.split(", "),a=i[0].split("/"),o={YYYY:a[2],MM:a[0],DD:a[1],"hh:mm":i[1].match(/^[\d]{2}/)[0]==="24"?i[1].replace(/^[\d]{2}/,"00"):i[1]};return n.replace(/YYYY|MM|DD|(hh:mm)/g,function(c){return o[c]})}return"--"}function xt(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=+r;return(n||n===0)&&O(n)?n.toFixed(t):"".concat(n)}function Ft(r){return O(+r)?r>1e9?"".concat(+(r/1e9).toFixed(3),"B"):r>1e6?"".concat(+(r/1e6).toFixed(3),"M"):r>1e3?"".concat(+(r/1e3).toFixed(3),"K"):r:"--"}function Ie(r,t){return t==null&&(t=10),+(r=(+r).toFixed(t=Math.min(Math.max(0,t),20)))}function re(r){return Math.log(r)/Math.log(10)}function zt(r){return Math.pow(10,r)}var At={ZOOM:"zoom",SCROLL:"scroll",CROSSHAIR:"crosshair",TOOLTIP:"tooltip",PANE_DRAG:"pane_drag"};function hn(r){return Object.values(At).indexOf(r)>-1}var di=function(){function r(t){E(this,r),this._chartStore=t,this._dateTimeFormat=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),this._zoomEnabled=!0,this._scrollEnabled=!0,this._loading=!0,this._loadMoreCallback=null,this._more=!0,this._totalDataSpace=0,this._dataSpace=6,this._barSpace=this._calcBarSpace(),this._offsetRightSpace=50,this._offsetRightBarCount=this._offsetRightSpace/this._dataSpace,this._leftMinVisibleBarCount=2,this._rightMinVisibleBarCount=2,this._from=0,this._to=0,this._preOffsetRightBarCount=0}return I(r,[{key:"_calcBarSpace",value:function(){return Math.max(1,Math.min(Math.floor(.82*this._dataSpace),Math.floor(this._dataSpace)-1))}},{key:"adjustFromTo",value:function(){var t=this._chartStore.dataList().length,n=this._totalDataSpace/this._dataSpace,e=n-Math.min(this._leftMinVisibleBarCount,t);this._offsetRightBarCount>e&&(this._offsetRightBarCount=e);var i=-t+Math.min(this._rightMinVisibleBarCount,t);i>this._offsetRightBarCount&&(this._offsetRightBarCount=i),this._to=Math.round(this._offsetRightBarCount+t+.5),this._from=Math.round(this._to-n)-1,this._to>t&&(this._to=t),0>this._from&&(this._from=0),this._chartStore.adjustVisibleDataList(),this._from===0&&this._more&&!this._loading&&W(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(gt(this._chartStore.dataList()[0],"timestamp")))}},{key:"setMore",value:function(t){this._more=t}},{key:"setLoading",value:function(t){this._loading=t}},{key:"dateTimeFormat",value:function(){return this._dateTimeFormat}},{key:"setTimezone",value:function(t){var n;try{n=new Intl.DateTimeFormat("en",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{}n&&(this._dateTimeFormat=n)}},{key:"timezone",value:function(){return this._dateTimeFormat.resolvedOptions().timeZone}},{key:"dataSpace",value:function(){return this._dataSpace}},{key:"barSpace",value:function(){return this._barSpace}},{key:"halfBarSpace",value:function(){return this._barSpace/2}},{key:"setDataSpace",value:function(t,n){1>t||t>50||this._dataSpace===t||(this._dataSpace=t,this._barSpace=this._calcBarSpace(),n&&n(),this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0),this._chartStore.invalidate())}},{key:"setTotalDataSpace",value:function(t){this._totalDataSpace!==t&&(this._totalDataSpace=t,this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0))}},{key:"setOffsetRightSpace",value:function(t,n){this._offsetRightSpace=t,this._offsetRightBarCount=t/this._dataSpace,n&&(this.adjustFromTo(),this._chartStore.crosshairStore().recalculate(!0),this._chartStore.invalidate())}},{key:"resetOffsetRightSpace",value:function(){this.setOffsetRightSpace(this._offsetRightSpace)}},{key:"offsetRightSpace",value:function(){return this._offsetRightSpace}},{key:"offsetRightBarCount",value:function(){return this._offsetRightBarCount}},{key:"setOffsetRightBarCount",value:function(t){this._offsetRightBarCount=t}},{key:"setLeftMinVisibleBarCount",value:function(t){this._leftMinVisibleBarCount=t}},{key:"setRightMinVisibleBarCount",value:function(t){this._rightMinVisibleBarCount=t}},{key:"from",value:function(){return this._from}},{key:"to",value:function(){return this._to}},{key:"startScroll",value:function(){this._preOffsetRightBarCount=this._offsetRightBarCount}},{key:"scroll",value:function(t,n){if(this._scrollEnabled){var e=t/this._dataSpace;this._chartStore.actionStore().execute(At.SCROLL,{barCount:e,distance:t}),this._offsetRightBarCount=this._preOffsetRightBarCount-e,this.adjustFromTo();var i=n||this._chartStore.crosshairStore().get();this._chartStore.crosshairStore().set(i,!0),this._chartStore.invalidate()}}},{key:"getDataByDataIndex",value:function(t){return this._chartStore.dataList()[t]}},{key:"coordinateToFloatIndex",value:function(t){var n=this._chartStore.dataList().length;return Math.round(1e6*(n+this._offsetRightBarCount-(this._totalDataSpace-t)/this._dataSpace))/1e6}},{key:"dataIndexToTimestamp",value:function(t){var n=this.getDataByDataIndex(t);if(n)return n.timestamp}},{key:"timestampToDataIndex",value:function(t){return this._chartStore.dataList().length===0?0:function(n,e,i){var a=0,o=0;for(o=n.length-1;a!==o;){var c=Math.floor((o+a)/2),s=o-a,h=n[c][e];if(i===n[a][e])return a;if(i===n[o][e])return o;if(i===h)return c;if(i>h?a=c:o=c,2>=s)break}return a}(this._chartStore.dataList(),"timestamp",t)}},{key:"dataIndexToCoordinate",value:function(t){var n=this._chartStore.dataList().length;return this._totalDataSpace-(n+this._offsetRightBarCount-t-.5)*this._dataSpace}},{key:"coordinateToDataIndex",value:function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1}},{key:"zoom",value:function(t,n){var e=this;if(this._zoomEnabled){if(!n||!P(n.x)){var i=this._chartStore.crosshairStore().get();n={x:P(i.x)?i.x:this._totalDataSpace/2}}this._chartStore.actionStore().execute(At.ZOOM,{coordinate:n,scale:t});var a=this.coordinateToFloatIndex(n.x);this.setDataSpace(this._dataSpace+t*(this._dataSpace/10),function(){e._offsetRightBarCount+=a-e.coordinateToFloatIndex(n.x)})}}},{key:"setZoomEnabled",value:function(t){this._zoomEnabled=t}},{key:"zoomEnabled",value:function(){return this._zoomEnabled}},{key:"setScrollEnabled",value:function(t){this._scrollEnabled=t}},{key:"scrollEnabled",value:function(){return this._scrollEnabled}},{key:"setLoadMoreCallback",value:function(t){this._loadMoreCallback=t}},{key:"clear",value:function(){this._more=!0,this._loading=!0,this._from=0,this._to=0}}]),r}();function Te(r,t){return Te=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},Te(r,t)}function F(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Te(r,t)}function z(r,t){if(t&&(Rt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(r)}function b(r){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(r)}function ln(r,t,n,e,i,a,o){try{var c=r[a](o),s=c.value}catch(h){return void n(h)}c.done?t(s):Promise.resolve(s).then(e,i)}var un={exports:{}};(function(r){var t=function(n){var e,i=Object.prototype,a=i.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function l(S,x,A){return Object.defineProperty(S,x,{value:A,enumerable:!0,configurable:!0,writable:!0}),S[x]}try{l({},"")}catch{l=function(x,A,T){return x[A]=T}}function u(S,x,A,T){var w=Object.create((x&&x.prototype instanceof y?x:y).prototype),N=new G(T||[]);return w._invoke=function(Y,ct,D){var tt=d;return function(U,j){if(tt===p)throw Error("Generator is already running");if(tt===_){if(U==="throw")throw j;return ce()}for(D.method=U,D.arg=j;;){var vt=D.delegate;if(vt){var ht=K(vt,D);if(ht){if(ht===m)continue;return ht}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(tt===d)throw tt=_,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);tt=p;var rt=f(Y,ct,D);if(rt.type==="normal"){if(tt=D.done?_:v,rt.arg===m)continue;return{value:rt.arg,done:D.done}}rt.type==="throw"&&(tt=_,D.method="throw",D.arg=rt.arg)}}}(S,A,N),w}function f(S,x,A){try{return{type:"normal",arg:S.call(x,A)}}catch(T){return{type:"throw",arg:T}}}n.wrap=u;var d="suspendedStart",v="suspendedYield",p="executing",_="completed",m={};function y(){}function g(){}function k(){}var C={};l(C,c,function(){return this});var M=Object.getPrototypeOf,B=M&&M(M(Mt([])));B&&B!==i&&a.call(B,c)&&(C=B);var X=k.prototype=y.prototype=Object.create(C);function wt(S){["next","throw","return"].forEach(function(x){l(S,x,function(A){return this._invoke(x,A)})})}function it(S,x){function A(w,N,Y,ct){var D=f(S[w],S,N);if(D.type!=="throw"){var tt=D.arg,U=tt.value;return U&&typeof U=="object"&&a.call(U,"__await")?x.resolve(U.__await).then(function(j){A("next",j,Y,ct)},function(j){A("throw",j,Y,ct)}):x.resolve(U).then(function(j){tt.value=j,Y(tt)},function(j){return A("throw",j,Y,ct)})}ct(D.arg)}var T;this._invoke=function(w,N){function Y(){return new x(function(ct,D){A(w,N,ct,D)})}return T=T?T.then(Y,Y):Y()}}function K(S,x){var A=S.iterator[x.method];if(A===e){if(x.delegate=null,x.method==="throw"){if(S.iterator.return&&(x.method="return",x.arg=e,K(S,x),x.method==="throw"))return m;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var T=f(A,S.iterator,x.arg);if(T.type==="throw")return x.method="throw",x.arg=T.arg,x.delegate=null,m;var w=T.arg;return w?w.done?(x[S.resultName]=w.value,x.next=S.nextLoc,x.method!=="return"&&(x.method="next",x.arg=e),x.delegate=null,m):w:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,m)}function H(S){var x={tryLoc:S[0]};1 in S&&(x.catchLoc=S[1]),2 in S&&(x.finallyLoc=S[2],x.afterLoc=S[3]),this.tryEntries.push(x)}function Q(S){var x=S.completion||{};x.type="normal",delete x.arg,S.completion=x}function G(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(H,this),this.reset(!0)}function Mt(S){if(S){var x=S[c];if(x)return x.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var A=-1,T=function w(){for(;++A<S.length;)if(a.call(S,A))return w.value=S[A],w.done=!1,w;return w.value=e,w.done=!0,w};return T.next=T}}return{next:ce}}function ce(){return{value:e,done:!0}}return g.prototype=k,l(X,"constructor",k),l(k,"constructor",g),g.displayName=l(k,h,"GeneratorFunction"),n.isGeneratorFunction=function(S){var x=typeof S=="function"&&S.constructor;return!!x&&(x===g||(x.displayName||x.name)==="GeneratorFunction")},n.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,k):(S.__proto__=k,l(S,h,"GeneratorFunction")),S.prototype=Object.create(X),S},n.awrap=function(S){return{__await:S}},wt(it.prototype),l(it.prototype,s,function(){return this}),n.AsyncIterator=it,n.async=function(S,x,A,T,w){w===void 0&&(w=Promise);var N=new it(u(S,x,A,T),w);return n.isGeneratorFunction(x)?N:N.next().then(function(Y){return Y.done?Y.value:N.next()})},wt(X),l(X,h,"Generator"),l(X,c,function(){return this}),l(X,"toString",function(){return"[object Generator]"}),n.keys=function(S){var x=[];for(var A in S)x.push(A);return x.reverse(),function T(){for(;x.length;){var w=x.pop();if(w in S)return T.value=w,T.done=!1,T}return T.done=!0,T}},n.values=Mt,G.prototype={constructor:G,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Q),!S)for(var x in this)x.charAt(0)==="t"&&a.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=e)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var x=this;function A(D,tt){return N.type="throw",N.arg=S,x.next=D,tt&&(x.method="next",x.arg=e),!!tt}for(var T=this.tryEntries.length-1;T>=0;--T){var w=this.tryEntries[T],N=w.completion;if(w.tryLoc==="root")return A("end");if(this.prev>=w.tryLoc){var Y=a.call(w,"catchLoc"),ct=a.call(w,"finallyLoc");if(Y&&ct){if(w.catchLoc>this.prev)return A(w.catchLoc,!0);if(w.finallyLoc>this.prev)return A(w.finallyLoc)}else if(Y){if(w.catchLoc>this.prev)return A(w.catchLoc,!0)}else{if(!ct)throw Error("try statement without catch or finally");if(w.finallyLoc>this.prev)return A(w.finallyLoc)}}}},abrupt:function(S,x){for(var A=this.tryEntries.length-1;A>=0;--A){var T=this.tryEntries[A];if(this.prev>=T.tryLoc&&a.call(T,"finallyLoc")&&T.finallyLoc>this.prev){var w=T;break}}!w||S!=="break"&&S!=="continue"||w.tryLoc>x||x>w.finallyLoc||(w=null);var N=w?w.completion:{};return N.type=S,N.arg=x,w?(this.method="next",this.next=w.finallyLoc,m):this.complete(N)},complete:function(S,x){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&x&&(this.next=x),m},finish:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.finallyLoc===S)return this.complete(A.completion,A.afterLoc),Q(A),m}},catch:function(S){for(var x=this.tryEntries.length-1;x>=0;--x){var A=this.tryEntries[x];if(A.tryLoc===S){var T=A.completion;if(T.type==="throw"){var w=T.arg;Q(A)}return w}}throw Error("illegal catch attempt")},delegateYield:function(S,x,A){return this.delegate={iterator:Mt(S),resultName:x,nextLoc:A},this.method==="next"&&(this.arg=e),m}},n}(r.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(un);var fn=un.exports,Me="line",Oe="bar",De="circle",fe={PRICE:"price",VOLUME:"volume",NORMAL:"normal"};function de(r,t,n,e,i,a){var o=a.color,c=a.isStroke,s={prev:{kLineData:r[n-1],technicalIndicatorData:t[n-1]},current:{kLineData:r[n],technicalIndicatorData:t[n]},next:{kLineData:r[n+1],technicalIndicatorData:t[n+1]}};return P(e.color)&&(o=W(e.color)?e.color(s,i)||a.color:e.color||a.color),P(e.isStroke)&&(c=W(e.isStroke)?e.isStroke(s):e.isStroke),{color:o,isStroke:c}}var vi=function(){function r(e){var i=e.name,a=e.shortName,o=e.series,c=e.calcParams,s=e.plots,h=e.precision,l=e.shouldCheckParamCount,u=e.shouldOhlc,f=e.shouldFormatBigNumber,d=e.minValue,v=e.maxValue,p=e.styles;E(this,r),this.name=i||"",this.shortName=P(a)?a:i,this.series=Object.values(fe).indexOf(o)!==-1?o:fe.NORMAL,this.precision=O(h)&&h>=0?h:4,this._precisionFlag=!1,this.calcParams=V(c)?c:[],this.plots=V(s)?s:[],this.shouldCheckParamCount=!bt(l)||l,this.shouldOhlc=!!bt(u)&&u,this.shouldFormatBigNumber=!!bt(f)&&f,this.minValue=d,this.maxValue=v,this.styles=p,this.result=[]}var t,n;return I(r,[{key:"_createParams",value:function(e){return e.map(function(i){return R(i)?i.value:i})}},{key:"setShortName",value:function(e){return!(!P(e)||this.shortName===e)&&(this.shortName=e,!0)}},{key:"setPrecision",value:function(e,i){return!(!O(e)||0>e||i&&(!i||this._precisionFlag))&&(this.precision=parseInt(e,10),i||(this._precisionFlag=!0),!0)}},{key:"setCalcParams",value:function(e){if(!V(e)||this.shouldCheckParamCount&&e.length!==this.calcParams.length)return!1;for(var i=[],a=0;e.length>a;a++){var o=e[a],c=void 0,s=void 0;R(o)?(c=o.value,s=o.allowDecimal):(c=o,s=!1);var h=this.calcParams[a];if(R(h)&&bt(h.allowDecimal)&&(s=h.allowDecimal),!O(c)||!s&&parseInt(c,10)!==c)return!1;i.push({allowDecimal:s,value:c})}this.calcParams=i;var l=this.regeneratePlots(this._createParams(i));return l&&V(l)&&(this.plots=l),!0}},{key:"setShouldOhlc",value:function(e){return!(!bt(e)||this.shouldOhlc===e)&&(this.shouldOhlc=e,!0)}},{key:"setShouldFormatBigNumber",value:function(e){return!(!bt(e)||this.shouldFormatBigNumber===e)&&(this.shouldFormatBigNumber=e,!0)}},{key:"setStyles",value:function(e,i){return!!R(e)&&(this.styles||(this.styles={margin:Z(i.margin),bar:Z(i.bar),line:Z(i.line),circle:Z(i.circle)}),Et(this.styles,e),!0)}},{key:"calc",value:(t=fn.mark(function e(i){return fn.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.calcTechnicalIndicator(i,{params:this._createParams(this.calcParams),plots:this.plots});case 2:if(a.t0=a.sent,a.t0){a.next=5;break}a.t0=[];case 5:this.result=a.t0;case 6:case"end":return a.stop()}},e,this)}),n=function(){var e=this,i=arguments;return new Promise(function(a,o){var c=t.apply(e,i);function s(l){ln(c,a,o,s,h,"next",l)}function h(l){ln(c,a,o,s,h,"throw",l)}s(void 0)})},function(e){return n.apply(this,arguments)})},{key:"calcTechnicalIndicator",value:function(e,i){}},{key:"regeneratePlots",value:function(e){}}]),r}();function pi(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return dn(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return dn(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function dn(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}function _i(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var mi=function(){function r(t){E(this,r),this._chartStore=t,this._templates=this._createTemplates(),this._instances=new Map}return I(r,[{key:"_createTechInfo",value:function(t){return{name:t.name,shortName:t.shortName,series:t.series,calcParams:t.calcParams,shouldCheckParamCount:t.shouldCheckParamCount,shouldOhlc:t.shouldOhlc,shouldFormatBigNumber:t.shouldFormatBigNumber,precision:t.precision,styles:t.styles,plots:t.plots,result:t.result||[]}}},{key:"_createTemplates",value:function(){var t={},n=L.technicalIndicatorExtensions;for(var e in n){var i=this._createTemplateInstance(n[e]);i&&(t[e]=i)}return t}},{key:"_createTemplateInstance",value:function(t){var n=t.name,e=t.shortName,i=t.series,a=t.calcParams,o=t.plots,c=t.precision,s=t.shouldCheckParamCount,h=t.shouldOhlc,l=t.shouldFormatBigNumber,u=t.minValue,f=t.maxValue,d=t.styles,v=t.calcTechnicalIndicator,p=t.regeneratePlots,_=t.createToolTipDataSource,m=t.render;if(!n||!W(v))return null;var y=function(g){F(C,g);var k=_i(C);function C(){return E(this,C),k.call(this,{name:n,shortName:e,series:i,calcParams:a,plots:o,precision:c,shouldCheckParamCount:s,shouldOhlc:h,shouldFormatBigNumber:l,minValue:u,maxValue:f,styles:d})}return I(C)}(vi);return y.prototype.calcTechnicalIndicator=v,W(p)&&(y.prototype.regeneratePlots=p),W(_)&&(y.prototype.createToolTipDataSource=_),W(m)&&(y.prototype.render=m),new y}},{key:"addTemplate",value:function(t){var n=this;t.forEach(function(e){var i=n._createTemplateInstance(e||{});i&&(n._templates[i.name]=i)})}},{key:"hasTemplate",value:function(t){return!!this._templates[t]}},{key:"getTemplateInfo",value:function(t){if(!P(t)){var n={};for(var e in this._templates)n[e]=this._createTechInfo(this._templates[e]);return n}var i=this._templates[t];return i?this._createTechInfo(i):{}}},{key:"addInstance",value:function(t,n,e){var i=n.name,a=n.calcParams,o=n.precision,c=n.shouldOhlc,s=n.shouldFormatBigNumber,h=n.styles,l=this._instances.get(t);if(!l||!l.has(i)){l||(l=new Map,this._instances.set(t,l));var u=this._templates[i],f=Object.create(Object.getPrototypeOf(u));for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(f[d]=u[d]);return f.setCalcParams(a),f.setPrecision(o),f.setShouldOhlc(c),f.setShouldFormatBigNumber(s),f.setStyles(h,this._chartStore.styleOptions().technicalIndicator),e||l.clear(),l.set(i,f),f.calc(this._chartStore.dataList())}}},{key:"instances",value:function(t){return this._instances.get(t)||new Map}},{key:"removeInstance",value:function(t,n){var e=!1;if(this._instances.has(t)){var i=this._instances.get(t);P(n)?i.has(n)&&(i.delete(n),e=!0):(i.clear(),e=!0),i.size===0&&this._instances.delete(t)}return e}},{key:"hasInstance",value:function(t){return this._instances.has(t)}},{key:"calcInstance",value:function(t,n){var e=this,i=[];if(P(t))if(P(n)){var a=this._instances.get(n);a&&a.has(t)&&i.push(a.get(t).calc(this._chartStore.dataList()))}else this._instances.forEach(function(o){o.has(t)&&i.push(o.get(t).calc(e._chartStore.dataList()))});else this._instances.forEach(function(o){o.forEach(function(c){i.push(c.calc(e._chartStore.dataList()))})});return Promise.all(i)}},{key:"getInstanceInfo",value:function(t,n){var e=this,i=function(o){var c,s=[],h=pi(o);try{for(h.s();!(c=h.n()).done;){var l=c.value[1];if(l){var u=e._createTechInfo(l);if(l.name===n)return u;s.push(u)}}}catch(f){h.e(f)}finally{h.f()}return s};if(!P(t)){var a={};return this._instances.forEach(function(o,c){a[c]=i(o)}),a}return this._instances.has(t)?i(this._instances.get(t)):{}}},{key:"setSeriesPrecision",value:function(t,n){var e=function(a){a.series===fe.PRICE&&a.setPrecision(t,!0),a.series===fe.VOLUME&&a.setPrecision(n,!0)};for(var i in this._templates)e(this._templates[i]);this._instances.forEach(function(a){a.forEach(function(o){e(o)})})}},{key:"override",value:function(t,n){var e=this,i=t.name,a=t.shortName,o=t.calcParams,c=t.precision,s=t.shouldOhlc,h=t.shouldFormatBigNumber,l=t.styles,u=this._chartStore.styleOptions().technicalIndicator,f=new Map;if(P(n))this._instances.has(n)&&f.set(n,this._instances.get(n));else{f=this._instances;var d=this._templates[i];d&&(d.setCalcParams(o),d.setShortName(a),d.setPrecision(c),d.setShouldOhlc(s),d.setShouldFormatBigNumber(h),d.setStyles(l,u))}var v=!1,p=[];if(f.forEach(function(_){if(_.has(i)){var m=_.get(i),y=m.setShortName(a),g=m.setCalcParams(o),k=m.setPrecision(c),C=m.setShouldOhlc(s),M=m.setShouldFormatBigNumber(h),B=m.setStyles(l,u);(y||g||k||C||M||B)&&(v=!0),g&&p.push(m.calc(e._chartStore.dataList()))}}),v)return Promise.all(p)}}]),r}();function Vt(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function vn(r,t){t.forEach(function(n){var e=n.key,i=n.fn;W(i)&&(r[e]=i)})}var Le=function(){function r(t){var n=t.id,e=t.chartStore,i=t.xAxis,a=t.yAxis;E(this,r),this._id=n,this._chartStore=e,this._xAxis=i,this._yAxis=a,this._styles=null}return I(r,[{key:"draw",value:function(t){}},{key:"setStyles",value:function(t,n){return!!R(t)&&(this._styles||(this._styles=Z(n)),Et(this._styles,t),!0)}},{key:"id",value:function(){return this._id}},{key:"styles",value:function(){return this._styles}},{key:"setYAxis",value:function(t){t&&(this._yAxis=t)}},{key:"checkEventCoordinateOn",value:function(t){}},{key:"onClick",value:function(t){}},{key:"onRightClick",value:function(t){}},{key:"onMouseEnter",value:function(t){}},{key:"onMouseLeave",value:function(t){}}]),r}();function Re(r,t,n,e){r.fillStyle=t,r.beginPath(),r.arc(n.x,n.y,e,0,2*Math.PI),r.closePath(),r.fill()}function ve(r,t,n){var e=Math.abs(t.x-r.x),i=Math.abs(t.y-r.y),a=Math.abs(n.x-r.x);return Math.abs(e*Math.abs(n.y-r.y)-a*i)/2}function Be(r,t){var n=r.x-t.x;if(n!==0){var e=(r.y-t.y)/n;return{k:e,b:r.y-e*r.x}}}function pe(r,t,n){return pn(Be(r,t),n)}function pn(r,t){return r?t.x*r.k+r.b:t.y}function It(r,t,n){if(!n||!r||!t)return!1;if(r.x===t.x)return 2>Math.abs(n.x-r.x);var e=Be(r,t),i=pn(e,n),a=Math.abs(i-n.y);return 4>a*a/(e.k*e.k+1)}function _e(r,t,n){return!!It(r,t,n)&&(r.x===t.x?t.y>r.y?2>r.y-n.y:2>n.y-r.y:t.x>r.x?2>r.x-n.x:2>n.x-r.x)}function Fe(r,t,n){return!!It(r,t,n)&&(r.x===t.x?4>Math.abs(r.y-n.y)+Math.abs(t.y-n.y)-Math.abs(r.y-t.y):4>Math.abs(r.x-n.x)+Math.abs(t.x-n.x)-Math.abs(r.x-t.x))}function _n(r,t,n){if(!n)return!1;var e=n.x-r.x,i=n.y-r.y;return!(e*e+i*i>t*t)}function mn(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=[];if(r.length>1)if(r[0].x===r[1].x){var i=0,a=t.y;if(e.push([{x:r[0].x,y:i},{x:r[0].x,y:a}]),r.length>2){e.push([{x:r[2].x,y:i},{x:r[2].x,y:a}]);for(var o=r[0].x-r[2].x,c=0;n>c;c++){var s=o*(c+1);e.push([{x:r[0].x+s,y:i},{x:r[0].x+s,y:a}])}}}else{var h=0,l=t.x,u=Be(r[0],r[1]),f=u.k,d=u.b;if(e.push([{x:h,y:h*f+d},{x:l,y:l*f+d}]),r.length>2){var v=r[2].y-f*r[2].x;e.push([{x:h,y:h*f+v},{x:l,y:l*f+v}]);for(var p=d-v,_=0;n>_;_++){var m=d+p*(_+1);e.push([{x:h,y:h*f+m},{x:l,y:l*f+m}])}}}return e}function ze(r,t,n){r.save(),r.lineWidth%2&&r.translate(.5,.5),r.beginPath();var e=!0;t.forEach(function(i){i&&(e?(r.moveTo(i.x,i.y),e=!1):r.lineTo(i.x,i.y))}),n(),r.restore()}function yi(r,t){ze(r,t,function(){r.closePath(),r.stroke()})}function yn(r,t){ze(r,t,function(){r.closePath(),r.fill()})}function jt(r,t,n,e){r.beginPath();var i=r.lineWidth%2?.5:0;r.moveTo(n,t+i),r.lineTo(e,t+i),r.stroke(),r.closePath()}function ae(r,t,n,e){r.beginPath();var i=r.lineWidth%2?.5:0;r.moveTo(t+i,n),r.lineTo(t+i,e),r.stroke(),r.closePath()}function Kt(r,t){ze(r,t,function(){r.stroke(),r.closePath()})}function qt(r){return r.ownerDocument&&r.ownerDocument.defaultView&&r.ownerDocument.defaultView.devicePixelRatio||2}function lt(r,t){return Math.round(r.measureText(t).width)}function J(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:12,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Helvetica Neue";return"".concat(t," ").concat(r,"px ").concat(n)}function Ht(r,t,n){r.font=J(n.size,n.weight,n.family);var e=lt(r,t);return n.paddingLeft+n.paddingRight+e+2*(n.borderSize||0)}function me(r){return r.paddingTop+r.paddingBottom+r.size+2*(r.borderSize||0)}function gi(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return gn(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return gn(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function gn(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}function xi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var xn="other",Pt="point",Tt="none",Si="line",ki="text",bi="continuous_line",wi="polygon",Ei="arc",Sn=0,kn=1,bn=2,oe={NORMAL:"normal",WEAK_MAGNET:"weak_magnet",STRONG_MAGNET:"strong_magnet"},Pi=function(r){F(n,r);var t=xi(n);function n(e){var i,a=e.id,o=e.name,c=e.totalStep,s=e.chartStore,h=e.xAxis,l=e.yAxis,u=e.points,f=e.styles,d=e.lock,v=e.mode,p=e.data;return E(this,n),(i=t.call(this,{id:a,chartStore:s,xAxis:h,yAxis:l}))._name=o,i._totalStep=c,i._lock=d,i._mode=oe.NORMAL,i.setMode(v),i._data=p,i._drawStep=1,i._points=[],i.setPoints(u),i.setStyles(f,s.styleOptions().shape),i._prevPressPoint=null,i._prevPoints=null,i._coordinates=[],i}return I(n,[{key:"setPoints",value:function(e){if(V(e)&&e.length>0){var i;this._totalStep-1>e.length?(this._drawStep=e.length+1,this._points=Z(e),i=e.length):(this._drawStep=-1,this._points=e.slice(0,this._totalStep-1),i=this._totalStep-1);for(var a=0;i>a;a++)this.performEventMoveForDrawing({step:a+2,mode:this._mode,points:this._points,movePoint:this._points[a],xAxis:this._xAxis,yAxis:this._yAxis});this._drawStep===-1&&this.performEventPressedMove({mode:this._mode,points:this._points,pressPointIndex:this._points.length-1,pressPoint:this._points[this._points.length-1],xAxis:this._xAxis,yAxis:this._yAxis})}}},{key:"_timestampOrDataIndexToCoordinateX",value:function(e){var i=e.timestamp,a=e.dataIndex;return i&&(a=this._chartStore.timeScaleStore().timestampToDataIndex(i)),this._xAxis.convertToPixel(a)}},{key:"_drawLines",value:function(e,i,a,o){e.save(),e.strokeStyle=a.color||o.color,e.lineWidth=a.size||o.size,a.style===et&&e.setLineDash(a.dashValue||o.dashValue),i.forEach(function(c){var s,h;if(c.length>1)switch((s=c[0]).x===(h=c[1]).x?bn:s.y===h.y?kn:Sn){case Sn:Kt(e,c);break;case kn:jt(e,c[0].y,c[0].x,c[1].x);break;case bn:ae(e,c[0].x,c[0].y,c[1].y)}}),e.restore()}},{key:"_drawContinuousLines",value:function(e,i,a,o){e.save(),e.strokeStyle=a.color||o.color,e.lineWidth=a.size||o.size,a.style===et&&e.setLineDash(a.dashValue||o.dashValue),i.forEach(function(c){c.length>0&&Kt(e,c)}),e.restore()}},{key:"_drawPolygons",value:function(e,i,a,o){var c;if(e.save(),a.style===le)e.fillStyle=(a.fill||o.fill).color,c=yn;else{var s=a.stroke||o.stroke;s.style===et&&e.setLineDash(s.dashValue),e.lineWidth=s.size,e.strokeStyle=s.color,c=yi}i.forEach(function(h){h.length>0&&c(e,h)}),e.restore()}},{key:"_drawArcs",value:function(e,i,a,o){if(e.save(),a.style===le)e.fillStyle=(a.fill||o.fill).color;else{var c=a.stroke||o.stroke;c.style===et&&e.setLineDash(c.dashValue),e.lineWidth=c.size,e.strokeStyle=c.color}i.forEach(function(s){var h=s.x,l=s.y,u=s.radius,f=s.startAngle,d=s.endAngle;e.beginPath(),e.arc(h,l,u,f,d),a.style===le?(e.closePath(),e.fill()):(e.stroke(),e.closePath())}),e.restore()}},{key:"_drawText",value:function(e,i,a,o){var c;e.save(),a.style===we?(e.strokeStyle=a.color||o.color,c=e.strokeText):(e.fillStyle=a.color||o.color,c=e.fillText),e.font=J(a.size||o.size,a.family||o.family,a.weight||o.weight);var s=a.offset||o.offset||[0,0];i.forEach(function(h){c.call(e,h.text,h.x+s[1],h.y+s[0])}),e.restore()}},{key:"draw",value:function(e){var i=this;this._coordinates=this._points.map(function(h){var l=h.value;return{x:i._timestampOrDataIndexToCoordinateX({timestamp:h.timestamp,dataIndex:h.dataIndex}),y:i._yAxis.convertToPixel(l)}});var a=this._styles||this._chartStore.styleOptions().shape;if(this._drawStep!==1&&this._coordinates.length>0){var o={width:this._xAxis.width(),height:this._yAxis.height()},c={price:this._chartStore.pricePrecision(),volume:this._chartStore.volumePrecision()};this._shapeDataSources=this.createShapeDataSource({step:this._drawStep,mode:this._mode,points:this._points,coordinates:this._coordinates,viewport:{width:this._xAxis.width(),height:this._yAxis.height()},precision:{price:this._chartStore.pricePrecision(),volume:this._chartStore.volumePrecision()},styles:a,xAxis:this._xAxis,yAxis:this._yAxis,data:this._data})||[],this._shapeDataSources.forEach(function(h){var l=h.styles,u=h.dataSource,f=u===void 0?[]:u;if(h.isDraw)switch(h.type){case Si:i._drawLines(e,f,l||a.line,a.line);break;case bi:i._drawContinuousLines(e,f,l||a.line,a.line);break;case wi:i._drawPolygons(e,f,l||a.polygon,a.polygon);break;case Ei:i._drawArcs(e,f,l||a.arc,a.arc);break;case ki:i._drawText(e,f,l||a.text,a.text)}}),this.drawExtend&&(e.save(),this.drawExtend({ctx:e,dataSource:this._shapeDataSources,styles:a,viewport:o,precision:c,mode:this._mode,xAxis:this._xAxis,yAxis:this._yAxis,data:this._data}),e.restore())}var s=this._chartStore.shapeStore().eventOperate();(s.hover.id===this._id&&s.hover.element!==Tt||s.click.id===this._id&&s.click.element!==Tt||this.isDrawing())&&this._coordinates.forEach(function(h,l){var u=h.x,f=h.y,d=a.point.radius,v=a.point.backgroundColor,p=a.point.borderColor,_=a.point.borderSize;s.hover.id===i._id&&s.hover.element===Pt&&l===s.hover.elementIndex&&(d=a.point.activeRadius,v=a.point.activeBackgroundColor,p=a.point.activeBorderColor,_=a.point.activeBorderSize),Re(e,p,{x:u,y:f},d+_),Re(e,v,{x:u,y:f},d)})}},{key:"setLock",value:function(e){this._lock=e}},{key:"name",value:function(){return this._name}},{key:"lock",value:function(){return this._lock}},{key:"totalStep",value:function(){return this._totalStep}},{key:"mode",value:function(){return this._mode}},{key:"setMode",value:function(e){Object.values(oe).indexOf(e)>-1&&(this._mode=e)}},{key:"setData",value:function(e){return e!==this._data&&(this._data=e,!0)}},{key:"data",value:function(){return this._data}},{key:"points",value:function(){return this._points}},{key:"isDrawing",value:function(){return this._drawStep!==-1}},{key:"isStart",value:function(){return this._drawStep===1}},{key:"checkEventCoordinateOn",value:function(e){for(var i=this._styles||this._chartStore.styleOptions().shape,a=this._coordinates.length-1;a>-1;a--)if(_n(this._coordinates[a],i.point.radius,e))return{id:this._id,element:Pt,elementIndex:a,instance:this};if(this._shapeDataSources){var o,c=gi(this._shapeDataSources);try{for(c.s();!(o=c.n()).done;){var s=o.value,h=s.key,l=s.type,u=s.dataSource,f=u===void 0?[]:u;if(s.isCheck){for(var d=0;f.length>d;d++)if(this.checkEventCoordinateOnShape({key:h,type:l,dataSource:f[d],eventCoordinate:e}))return{id:this._id,element:xn,elementIndex:d,instance:this}}}}catch(v){c.e(v)}finally{c.f()}}}},{key:"_performValue",value:function(e,i,a){var o=this._yAxis.convertFromPixel(e);if(this._mode===oe.NORMAL||a!=="candle_pane")return o;var c=this._chartStore.timeScaleStore().getDataByDataIndex(i);if(!c)return o;if(o>c.high){if(this._mode===oe.WEAK_MAGNET){var s=this._yAxis.convertToPixel(c.high);return this._yAxis.convertFromPixel(s-8)>o?c.high:o}return c.high}if(c.low>o){if(this._mode===oe.WEAK_MAGNET){var h=this._yAxis.convertToPixel(c.low);return o>this._yAxis.convertFromPixel(h-8)?c.low:o}return c.low}var l=Math.max(c.open,c.close);if(o>l)return c.high-o>o-l?l:c.high;var u=Math.min(c.open,c.close);return u>o?u-o>o-c.low?c.low:u:o-u>l-o?l:u}},{key:"mouseMoveForDrawing",value:function(e,i){var a=this._xAxis.convertFromPixel(e.x),o=this._chartStore.timeScaleStore().dataIndexToTimestamp(a),c=this._performValue(e.y,a,i.paneId);this._points[this._drawStep-1]={timestamp:o,value:c,dataIndex:a},this.performEventMoveForDrawing({step:this._drawStep,mode:this._mode,points:this._points,movePoint:{timestamp:o,value:c,dataIndex:a},xAxis:this._xAxis,yAxis:this._yAxis}),this.onDrawing({id:this._id,step:this._drawStep,points:this._points})}},{key:"mouseLeftButtonDownForDrawing",value:function(){this._drawStep===this._totalStep-1?(this._drawStep=-1,this._chartStore.shapeStore().progressInstanceComplete(),this.onDrawEnd({id:this._id,points:this._points})):this._drawStep++}},{key:"mousePressedPointMove",value:function(e,i){var a=this._chartStore.shapeStore().eventOperate(),o=a.click.elementIndex;if(!this._lock&&a.click.id===this._id&&a.click.element===Pt&&o!==-1){var c=this._xAxis.convertFromPixel(e.x),s=this._chartStore.timeScaleStore().dataIndexToTimestamp(c),h=this._performValue(e.y,c,i.paneId);this._points[o].timestamp=s,this._points[o].dataIndex=c,this._points[o].value=h,this.performEventPressedMove({points:this._points,mode:this._mode,pressPointIndex:o,pressPoint:{dataIndex:c,timestamp:s,value:h},xAxis:this._xAxis,yAxis:this._yAxis}),this.onPressedMove({id:this._id,element:Pt,points:this._points,event:i})}}},{key:"startPressedOtherMove",value:function(e){var i=this._xAxis.convertFromPixel(e.x),a=this._yAxis.convertFromPixel(e.y);this._prevPressPoint={dataIndex:i,value:a},this._prevPoints=Z(this._points)}},{key:"mousePressedOtherMove",value:function(e,i){var a=this;if(!this._lock&&this._prevPressPoint){var o=this._xAxis.convertFromPixel(e.x),c=this._yAxis.convertFromPixel(e.y),s=o-this._prevPressPoint.dataIndex,h=c-this._prevPressPoint.value;this._points=this._prevPoints.map(function(l){P(l.dataIndex)||(l.dataIndex=a._chartStore.timeScaleStore().timestampToDataIndex(l.timestamp));var u=l.dataIndex+s;return{dataIndex:u,value:l.value+h,timestamp:a._chartStore.timeScaleStore().dataIndexToTimestamp(u)}}),this.onPressedMove({id:this._id,element:xn,points:this._points,event:i})}}},{key:"onDrawStart",value:function(e){}},{key:"onDrawing",value:function(e){}},{key:"onDrawEnd",value:function(e){}},{key:"onPressedMove",value:function(e){}},{key:"onRemove",value:function(e){}},{key:"checkEventCoordinateOnShape",value:function(e){}},{key:"createShapeDataSource",value:function(e){}},{key:"performEventMoveForDrawing",value:function(e){}},{key:"performEventPressedMove",value:function(e){}}]),n}(Le),ut=1,Ci=2,Ve=3;function wn(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}function En(r){for(var t=1;arguments.length>t;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wn(Object(n),!0).forEach(function(e){Vt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function Pn(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return Cn(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Cn(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function Cn(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}function Ai(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Ii=function(){function r(t){E(this,r),this._chartStore=t,this._templates=this._createTemplates(),this._eventOperate={click:{id:"",element:Tt,elementIndex:-1},hover:{id:"",element:Tt,elementIndex:-1}},this._progressInstance=null,this._pressedInstance=null,this._instances=new Map}return I(r,[{key:"_createTemplates",value:function(){var t={},n=L.shapeExtensions;for(var e in n){var i=this._createTemplateClass(n[e]);i&&(t[e]=i)}return t}},{key:"_createTemplateClass",value:function(t){var n=t.name,e=t.totalStep,i=t.checkEventCoordinateOnShape,a=t.createShapeDataSource,o=t.performEventPressedMove,c=t.performEventMoveForDrawing,s=t.drawExtend;if(!(n&&O(e)&&W(i)&&W(a)))return null;var h=function(l){F(f,l);var u=Ai(f);function f(d){var v=d.id,p=d.chartStore,_=d.xAxis,m=d.yAxis,y=d.points,g=d.styles,k=d.lock,C=d.mode,M=d.data;return E(this,f),u.call(this,{id:v,name:n,totalStep:e,chartStore:p,xAxis:_,yAxis:m,points:y,styles:g,lock:k,mode:C,data:M})}return I(f)}(Pi);return h.prototype.checkEventCoordinateOnShape=i,h.prototype.createShapeDataSource=a,W(o)&&(h.prototype.performEventPressedMove=o),W(c)&&(h.prototype.performEventMoveForDrawing=c),W(s)&&(h.prototype.drawExtend=s),h}},{key:"addTemplate",value:function(t){var n=this;t.forEach(function(e){var i=n._createTemplateClass(e);i&&(n._templates[e.name]=i)})}},{key:"getTemplate",value:function(t){return this._templates[t]}},{key:"getInstance",value:function(t){var n,e=Pn(this._instances);try{for(e.s();!(n=e.n()).done;){var i=(n.value[1]||[]).find(function(a){return a.id()===t});if(i)return i}}catch(a){e.e(a)}finally{e.f()}return null}},{key:"hasInstance",value:function(t){return!!this.getInstance(t)}},{key:"addInstance",value:function(t,n){t.isDrawing()?this._progressInstance={paneId:n,instance:t,fixed:P(n)}:(this._instances.has(n)||this._instances.set(n,[]),this._instances.get(n).push(t)),this._chartStore.invalidate(ut)}},{key:"progressInstance",value:function(){return this._progressInstance||{}}},{key:"progressInstanceComplete",value:function(){var t=this.progressInstance(),n=t.instance,e=t.paneId;n&&!n.isDrawing()&&(this._instances.has(e)||this._instances.set(e,[]),this._instances.get(e).push(n),this._progressInstance=null)}},{key:"updateProgressInstance",value:function(t,n){var e=this.progressInstance(),i=e.instance;i&&!e.fixed&&(i.setYAxis(t),this._progressInstance.paneId=n)}},{key:"pressedInstance",value:function(){return this._pressedInstance||{}}},{key:"updatePressedInstance",value:function(t,n,e){this._pressedInstance=t?{instance:t,paneId:n,element:e}:null}},{key:"instances",value:function(t){return this._instances.get(t)||[]}},{key:"setInstanceOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.id,e=t.styles,i=t.lock,a=t.mode,o=t.data,c=this._chartStore.styleOptions().shape,s=!1;if(P(n)){var h=this.getInstance(n);h&&(h.setLock(i),h.setMode(a),(h.setStyles(e,c)||h.setData(o))&&(s=!0))}else this._instances.forEach(function(l){l.forEach(function(u){u.setLock(i),u.setMode(a),(u.setStyles(e,c)||u.setData(o))&&(s=!0)})});s&&this._chartStore.invalidate(ut)}},{key:"getInstanceInfo",value:function(t){var n=function(o){return{name:o.name(),id:o.id(),totalStep:o.totalStep(),lock:o.lock(),mode:o.mode(),points:o.points(),styles:o.styles(),data:o.data()}},e=this.progressInstance();if(!P(t)){var i={};return this._instances.forEach(function(o,c){i[c]=o.map(function(s){return n(s)}),e.paneId===c&&e.instance&&i[c].push(n(e.instance))}),i}if(e.instance&&e.instance.id()===t)return n(e.instance);var a=this.getInstance(t);return a?n(a):null}},{key:"removeInstance",value:function(t){var n=!1,e=this.progressInstance().instance;if(!e||P(t)&&e.id()!==t||(e.onRemove({id:e.id()}),this._progressInstance=null,n=!0),P(t)){var i,a=Pn(this._instances);try{for(a.s();!(i=a.n()).done;){var o=i.value,c=o[1]||[],s=c.findIndex(function(h){return h.id()===t});if(s>-1){c[s].onRemove({id:c[s].id()}),c.splice(s,1),c.length===0&&this._instances.delete(o[0]),n=!0;break}}}catch(h){a.e(h)}finally{a.f()}}else this._instances.forEach(function(h){h.length>0&&h.forEach(function(l){l.onRemove({id:l.id()})})}),this._instances.clear(),n=!0;n&&this._chartStore.invalidate(ut)}},{key:"eventOperate",value:function(){return this._eventOperate}},{key:"setEventOperate",value:function(t){var n,e,i=this._eventOperate,a=i.hover,o=i.click;return!t.hover||a.id===t.hover.id&&a.element===t.hover.element&&a.elementIndex===t.hover.elementIndex||(this._eventOperate.hover=En({},t.hover),n=!0),!t.click||o.id===t.click.id&&o.element===t.click.element&&o.elementIndex===t.click.elementIndex||(this._eventOperate.click=En({},t.click),e=!0),n||e}},{key:"isEmpty",value:function(){return this._instances.size===0&&!this.progressInstance().instance}},{key:"isDrawing",value:function(){var t=this.progressInstance().instance;return t&&t.isDrawing()}},{key:"isPressed",value:function(){return!!this.pressedInstance().instance}}]),r}();function Ti(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return An(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return An(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function An(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}function In(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}var Mi=function(){function r(t){E(this,r),this._chartStore=t,this._annotations=new Map,this._visibleAnnotations=new Map,this._eventOperate={id:""}}return I(r,[{key:"eventOperate",value:function(){return this._eventOperate}},{key:"setEventOperate",value:function(t){t&&this._eventOperate.id!==t.id&&(this._eventOperate=function(n){for(var e=1;arguments.length>e;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?In(Object(i),!0).forEach(function(a){Vt(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):In(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}({},t))}},{key:"createVisibleAnnotations",value:function(){var t=this;this._visibleAnnotations.clear(),this._annotations.size>0&&this._chartStore.visibleDataList().forEach(function(n){var e=n.data,i=n.x;t._annotations.forEach(function(a,o){if(a.size>0){var c=a.get(e.timestamp)||[];if(c.length>0){var s,h=Ti(c);try{for(h.s();!(s=h.n()).done;){var l=s.value;l.createSymbolCoordinate(i),t._visibleAnnotations.has(o)?t._visibleAnnotations.get(o).push(l):t._visibleAnnotations.set(o,[l])}}catch(u){h.e(u)}finally{h.f()}}}})})}},{key:"add",value:function(t,n){var e=this;this._annotations.has(n)||this._annotations.set(n,new Map),t.forEach(function(i){var a=e._annotations.get(n);a.has(i.id())?a.get(i.id()).push(i):a.set(i.id(),[i])}),this.createVisibleAnnotations(),this._chartStore.invalidate(ut)}},{key:"get",value:function(t){return this._visibleAnnotations.get(t)}},{key:"remove",value:function(t,n){var e=!1;if(P(t)){if(this._annotations.has(t))if(P(n)){var i=this._annotations.get(t);[].concat(n).forEach(function(a){var o=a.timestamp;i.has(o)&&(e=!0,i.delete(o))}),i.size===0&&this._annotations.delete(t),e&&this.createVisibleAnnotations()}else e=!0,this._annotations.delete(t),this._visibleAnnotations.delete(t)}else e=!0,this._annotations.clear(),this._visibleAnnotations.clear();e&&this._chartStore.invalidate(ut)}},{key:"isEmpty",value:function(){return this._visibleAnnotations.size===0}}]),r}(),Oi=function(){function r(t){E(this,r),this._chartStore=t,this._tags=new Map}return I(r,[{key:"_getById",value:function(t,n){var e=this.get(n);return e?e.get(t):null}},{key:"has",value:function(t,n){return!!this._getById(t,n)}},{key:"update",value:function(t,n,e){var i=this._getById(t,n);return!!i&&i.update(e)}},{key:"get",value:function(t){return this._tags.get(t)}},{key:"add",value:function(t,n){this._tags.has(n)||this._tags.set(n,new Map);var e=this._tags.get(n);t.forEach(function(i){e.set(i.id(),i)}),this._chartStore.invalidate(ut)}},{key:"remove",value:function(t,n){var e=!1;if(P(t)){if(this._tags.has(t))if(P(n)){var i=this._tags.get(t);[].concat(n).forEach(function(a){i.has(a)&&(e=!0,i.delete(a))}),i.size===0&&this._tags.delete(t)}else e=!0,this._tags.delete(t)}else e=!0,this._tags.clear();e&&this._chartStore.invalidate(ut)}}]),r}();function Tn(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}function Mn(r){for(var t=1;arguments.length>t;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tn(Object(n),!0).forEach(function(e){Vt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var Di=function(){function r(t){E(this,r),this._chartStore=t,this._crosshair={}}return I(r,[{key:"set",value:function(t,n){var e,i,a=this._chartStore.dataList(),o=t||{},c=a[i=P(o.x)?0>(e=this._chartStore.timeScaleStore().coordinateToDataIndex(o.x))?0:e>a.length-1?a.length-1:e:e=a.length-1],s=this._chartStore.timeScaleStore().dataIndexToCoordinate(e),h=this._crosshair.x,l=this._crosshair.y,u=this._crosshair.paneId;this._crosshair=Mn(Mn({},o),{},{realX:s,kLineData:c,realDataIndex:e,dataIndex:i}),c&&this._chartStore.crosshairChange(this._crosshair),h===o.x&&l===o.y&&u===o.paneId||n||this._chartStore.invalidate(ut)}},{key:"recalculate",value:function(t){this.set(this._crosshair,t)}},{key:"get",value:function(){return this._crosshair}}]),r}(),Li=function(){function r(){E(this,r),this._observers=[]}return I(r,[{key:"subscribe",value:function(t){0>this._observers.indexOf(t)&&this._observers.push(t)}},{key:"unsubscribe",value:function(t){var n=this._observers.indexOf(t);n>-1?this._observers.splice(n,1):this._observers=[]}},{key:"execute",value:function(t){this._observers.forEach(function(n){n(t)})}},{key:"hasObservers",value:function(){return this._observers.length>0}}]),r}(),Ri=function(){function r(){E(this,r),this._delegates=new Map}return I(r,[{key:"execute",value:function(t,n){this.has(t)&&this._delegates.get(t).execute(n)}},{key:"has",value:function(t){return this._delegates.has(t)&&this._delegates.get(t).hasObservers()}},{key:"subscribe",value:function(t,n){return!!hn(t)&&(this._delegates.has(t)||this._delegates.set(t,new Li),this._delegates.get(t).subscribe(n),!0)}},{key:"unsubscribe",value:function(t,n){if(hn(t)){var e=this._delegates.get(t);return e.unsubscribe(n),e.hasObservers()||this._delegates.delete(t),!0}return!1}}]),r}(),Bi=function(){function r(t,n){E(this,r),this._handler=n,this._styleOptions=Z(fi),Et(this._styleOptions,t),this._pricePrecision=2,this._volumePrecision=0,this._dataList=[],this._visibleDataList=[],this._dragPaneFlag=!1,this._timeScaleStore=new di(this),this._technicalIndicatorStore=new mi(this),this._shapeStore=new Ii(this),this._annotationStore=new Mi(this),this._tagStore=new Oi(this),this._crosshairStore=new Di(this),this._actionStore=new Ri}return I(r,[{key:"adjustVisibleDataList",value:function(){this._visibleDataList=[];for(var t=this._timeScaleStore.from(),n=this._timeScaleStore.to(),e=t;n>e;e++){var i=this._dataList[e],a=this._timeScaleStore.dataIndexToCoordinate(e);this._visibleDataList.push({index:e,x:a,data:i})}this._annotationStore.createVisibleAnnotations()}},{key:"styleOptions",value:function(){return this._styleOptions}},{key:"applyStyleOptions",value:function(t){Et(this._styleOptions,t)}},{key:"pricePrecision",value:function(){return this._pricePrecision}},{key:"volumePrecision",value:function(){return this._volumePrecision}},{key:"setPriceVolumePrecision",value:function(t,n){this._pricePrecision=t,this._volumePrecision=n,this._technicalIndicatorStore.setSeriesPrecision(t,n)}},{key:"dataList",value:function(){return this._dataList}},{key:"visibleDataList",value:function(){return this._visibleDataList}},{key:"addData",value:function(t,n,e){if(R(t)){if(V(t)){this._timeScaleStore.setLoading(!1),this._timeScaleStore.setMore(!bt(e)||e);var i=this._dataList.length===0;this._dataList=t.concat(this._dataList),i&&this._timeScaleStore.resetOffsetRightSpace(),this._timeScaleStore.adjustFromTo()}else if(n<this._dataList.length)this._dataList[n]=t,this.adjustVisibleDataList();else{this._dataList.push(t);var a=this._timeScaleStore.offsetRightBarCount();0>a&&this._timeScaleStore.setOffsetRightBarCount(--a),this._timeScaleStore.adjustFromTo()}this._crosshairStore.recalculate(!0)}}},{key:"clearDataList",value:function(){this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear()}},{key:"timeScaleStore",value:function(){return this._timeScaleStore}},{key:"technicalIndicatorStore",value:function(){return this._technicalIndicatorStore}},{key:"shapeStore",value:function(){return this._shapeStore}},{key:"annotationStore",value:function(){return this._annotationStore}},{key:"tagStore",value:function(){return this._tagStore}},{key:"crosshairStore",value:function(){return this._crosshairStore}},{key:"actionStore",value:function(){return this._actionStore}},{key:"invalidate",value:function(t){this._handler.invalidate(t)}},{key:"crosshairChange",value:function(t){this._handler.crosshair(t)}},{key:"dragPaneFlag",value:function(){return this._dragPaneFlag}},{key:"setDragPaneFlag",value:function(t){this._dragPaneFlag=t}}]),r}();function Fi(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=b(r))!==null;);return r}function $t(){return $t=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(r,t,n){var e=Fi(r,t);if(e){var i=Object.getOwnPropertyDescriptor(e,t);return i.get?i.get.call(3>arguments.length?r:n):i.value}},$t.apply(this,arguments)}function ft(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=document.createElement(r);for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.style[e]=t[e]);return n}var On=function(){function r(t){E(this,r),this._height=-1,this._container=t.container,this._chartStore=t.chartStore,this._initBefore(t),this._initElement(),this._mainWidget=this._createMainWidget(this._element,t),this._yAxisWidget=this._createYAxisWidget(this._element,t)}return I(r,[{key:"_initBefore",value:function(t){}},{key:"_initElement",value:function(){this._element=ft("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"});var t=this._container.lastChild;t?this._container.insertBefore(this._element,t):this._container.appendChild(this._element)}},{key:"_createMainWidget",value:function(t,n){}},{key:"_createYAxisWidget",value:function(t,n){}},{key:"width",value:function(){return this._element.offsetWidth}},{key:"setWidth",value:function(t,n){this._mainWidget.setWidth(t),this._yAxisWidget&&this._yAxisWidget.setWidth(n)}},{key:"height",value:function(){return this._height}},{key:"setHeight",value:function(t){this._height=t,this._mainWidget.setHeight(t),this._yAxisWidget&&this._yAxisWidget.setHeight(t)}},{key:"setOffsetLeft",value:function(t,n){this._mainWidget.setOffsetLeft(t),this._yAxisWidget&&this._yAxisWidget.setOffsetLeft(n)}},{key:"layout",value:function(){this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainWidget.layout(),this._yAxisWidget&&this._yAxisWidget.layout()}},{key:"invalidate",value:function(t){this._yAxisWidget&&this._yAxisWidget.invalidate(t),this._mainWidget.invalidate(t)}},{key:"createHtml",value:function(t){var n=t.id,e=t.content,i=t.style;return t.position==="yAxis"?this._yAxisWidget&&this._yAxisWidget.createHtml({id:n,content:e,style:i}):this._mainWidget.createHtml({id:n,content:e,style:i})}},{key:"removeHtml",value:function(t){this._yAxisWidget&&this._yAxisWidget.removeHtml(t),this._mainWidget.removeHtml(t)}},{key:"getImage",value:function(t){var n=this._element.offsetWidth,e=this._element.offsetHeight,i=ft("canvas",{width:"".concat(n,"px"),height:"".concat(e,"px"),boxSizing:"border-box"}),a=i.getContext("2d"),o=qt(i);i.width=n*o,i.height=e*o,a.scale(o,o);var c=this._mainWidget.getElement(),s=c.offsetWidth,h=c.offsetHeight,l=parseInt(c.style.left,10);if(a.drawImage(this._mainWidget.getImage(t),l,0,s,h),this._yAxisWidget){var u=this._yAxisWidget.getElement(),f=u.offsetWidth,d=u.offsetHeight,v=parseInt(u.style.left,10);a.drawImage(this._yAxisWidget.getImage(t),v,0,f,d)}return i}},{key:"destroy",value:function(){this._container.removeChild(this._element)}}]),r}();function Dn(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}var je=function(){function r(t){E(this,r),this._width=0,this._height=0,this._initElement(t.container),this._mainView=this._createMainView(this._element,t),this._overlayView=this._createOverlayView(this._element,t),this._htmlBaseId=0,this._htmls=new Map}return I(r,[{key:"_initElement",value:function(t){this._element=ft("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box"}),t.appendChild(this._element)}},{key:"_createMainView",value:function(t,n){}},{key:"_createOverlayView",value:function(t,n){}},{key:"createHtml",value:function(t){var n=t.id,e=t.content,i=t.style,a=ft("div",function(s){for(var h=1;arguments.length>h;h++){var l=arguments[h]!=null?arguments[h]:{};h%2?Dn(Object(l),!0).forEach(function(u){Vt(s,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):Dn(Object(l)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(l,u))})}return s}({boxSizing:"border-box",position:"absolute",zIndex:12},i===void 0?{}:i));if(ie(e)){var o=e.replace(/(^\s*)|(\s*$)/g,"");a.innerHTML=o}else a.appendChild(e);var c=n||"html_".concat(++this._htmlBaseId);return this._htmls.has(c)?this._element.replaceChild(a,this._htmls.get(c)):this._element.appendChild(a),this._htmls.set(c,a),c}},{key:"removeHtml",value:function(t){var n=this;t?[].concat(t).forEach(function(e){var i=n._htmls.get(e);i&&(n._element.removeChild(i),n._htmls.delete(e))}):(this._htmls.forEach(function(e){n._element.removeChild(e)}),this._htmls.clear())}},{key:"getElement",value:function(){return this._element}},{key:"setWidth",value:function(t){this._width=t,this._mainView.setWidth(t),this._overlayView.setWidth(t)}},{key:"setHeight",value:function(t){this._height=t,this._mainView.setHeight(t),this._overlayView.setHeight(t)}},{key:"setOffsetLeft",value:function(t){this._element.style.left="".concat(t,"px")}},{key:"layout",value:function(){this._element.offsetWidth!==this._width&&(this._element.style.width="".concat(this._width,"px")),this._element.offsetHeight!==this._height&&(this._element.style.height="".concat(this._height,"px")),this._mainView.layout(),this._overlayView.layout()}},{key:"invalidate",value:function(t){switch(t){case ut:this._overlayView.flush();break;case Ci:case Ve:this._mainView.flush(),this._overlayView.flush()}}},{key:"getImage",value:function(t){var n=ft("canvas",{width:"".concat(this._width,"px"),height:"".concat(this._height,"px"),boxSizing:"border-box"}),e=n.getContext("2d"),i=qt(n);return n.width=this._width*i,n.height=this._height*i,e.scale(i,i),e.drawImage(this._mainView.getImage(),0,0,this._width,this._height),t&&this._overlayView&&e.drawImage(this._overlayView.getImage(),0,0,this._width,this._height),n}}]),r}();function He(r){return window.requestAnimationFrame?window.requestAnimationFrame(r):window.setTimeout(r,20)}var Jt=function(){function r(t,n){E(this,r),this._chartStore=n,this._initCanvas(t)}return I(r,[{key:"_initCanvas",value:function(t){this._canvas=ft("canvas",{position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"}),this._ctx=this._canvas.getContext("2d"),t.appendChild(this._canvas)}},{key:"_redraw",value:function(t){this._ctx.clearRect(0,0,this._canvas.offsetWidth,this._canvas.offsetHeight),t&&t(),this._draw()}},{key:"_draw",value:function(){}},{key:"setWidth",value:function(t){this._width=t}},{key:"setHeight",value:function(t){this._height=t}},{key:"layout",value:function(){var t=this;this._height!==this._canvas.offsetHeight||this._width!==this._canvas.offsetWidth?this._redraw(function(){var n=qt(t._canvas);t._canvas.style.width="".concat(t._width,"px"),t._canvas.style.height="".concat(t._height,"px"),t._canvas.width=Math.floor(t._width*n),t._canvas.height=Math.floor(t._height*n),t._ctx.scale(n,n)}):this.flush()}},{key:"flush",value:function(){var t,n=this;this.requestAnimationId&&(t=this.requestAnimationId,window.cancelAnimationFrame||clearTimeout(t),window.cancelAnimationFrame(t),this.requestAnimationId=null),this.requestAnimationId=He(function(){n._redraw()})}},{key:"getImage",value:function(){return this._canvas}}]),r}();function zi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Ln=function(r){F(n,r);var t=zi(n);function n(e,i,a,o,c){var s;return E(this,n),(s=t.call(this,e,i))._xAxis=a,s._yAxis=o,s._paneId=c,s}return I(n,[{key:"_draw",value:function(){this._ctx.globalCompositeOperation="destination-over",this._drawContent()}},{key:"_drawContent",value:function(){this._drawTechs(),this._drawGrid()}},{key:"_drawGrid",value:function(){var e=this,i=this._chartStore.styleOptions().grid;if(i.show){var a=i.horizontal;this._ctx.save(),a.show&&(this._ctx.strokeStyle=a.color,this._ctx.lineWidth=a.size,this._ctx.setLineDash(a.style===et?a.dashValue:[]),this._yAxis.ticks().forEach(function(c){jt(e._ctx,c.y,0,e._width)}));var o=i.vertical;o.show&&(this._ctx.strokeStyle=o.color,this._ctx.lineWidth=o.size,this._ctx.setLineDash(o.style===et?o.dashValue:[]),this._xAxis.ticks().forEach(function(c){ae(e._ctx,c.x,0,e._height)})),this._ctx.restore()}}},{key:"_drawTechs",value:function(){var e=this;this._ctx.globalCompositeOperation="source-over";var i=this._chartStore.styleOptions().technicalIndicator;this._chartStore.technicalIndicatorStore().instances(this._paneId).forEach(function(a){var o=a.plots,c=[],s=e._chartStore.dataList(),h=a.result,l=a.styles||i;a.render&&(e._ctx.save(),a.render({ctx:e._ctx,dataSource:{from:e._chartStore.timeScaleStore().from(),to:e._chartStore.timeScaleStore().to(),kLineDataList:e._chartStore.dataList(),technicalIndicatorDataList:h},viewport:{width:e._width,height:e._height,dataSpace:e._chartStore.timeScaleStore().dataSpace(),barSpace:e._chartStore.timeScaleStore().barSpace()},styles:l,xAxis:e._xAxis,yAxis:e._yAxis}),e._ctx.restore());var u=l.line.colors||[],f=u.length,d=e._yAxis.isCandleYAxis();e._ctx.lineWidth=1,e._drawGraphics(function(v,p,_,m,y){var g=h[p]||{},k=0;a.shouldOhlc&&!d&&e._drawCandleBar(v,m,y,p,_,l.bar,li),o.forEach(function(C){var M=g[C.key],B=e._yAxis.convertToPixel(M);switch(C.type){case De:if(P(M)){var X=de(s,h,p,C,l,{color:l.circle.noChangeColor,isStroke:!0});e._drawCircle({x:v,y:B,radius:m,color:X.color,isStroke:X.isStroke})}break;case Oe:if(P(M)){var wt;wt=P(C.baseValue)?C.baseValue:e._yAxis.min();var it=e._yAxis.convertToPixel(wt),K=Math.abs(it-B),H={x:v-m,width:2*m,height:Math.max(1,K)};H.y=B>it?it:1>K?it-1:B;var Q=de(s,h,p,C,l,{color:l.bar.noChangeColor});H.color=Q.color,H.isStroke=Q.isStroke,e._drawBar(H)}break;case Me:var G=null;if(P(M)&&(G={x:v,y:B}),c[k])c[k].coordinates.push(G);else{var Mt=de(s,h,p,C,l,{color:u[k%f]});c[k]={color:Mt.color,coordinates:[G]}}k++}})},function(){e._drawLines(c,l)})}),this._ctx.globalCompositeOperation="destination-over"}},{key:"_drawGraphics",value:function(e,i){var a=this._chartStore.visibleDataList(),o=this._chartStore.timeScaleStore().barSpace(),c=this._chartStore.timeScaleStore().halfBarSpace();a.forEach(function(s,h){e(s.x,s.index,s.data,c,o,h)}),i&&i()}},{key:"_drawLines",value:function(e,i){var a=this;this._ctx.lineWidth=i.line.size,e.forEach(function(o){a._ctx.strokeStyle=o.color,Kt(a._ctx,o.coordinates)})}},{key:"_drawBar",value:function(e){e.isStroke?(this._ctx.strokeStyle=e.color,this._ctx.strokeRect(e.x+.5,e.y,e.width-1,e.height)):(this._ctx.fillStyle=e.color,this._ctx.fillRect(e.x,e.y,e.width,e.height))}},{key:"_drawCircle",value:function(e){this._ctx.strokeStyle=e.color,this._ctx.fillStyle=e.color,this._ctx.beginPath(),this._ctx.arc(e.x,e.y,e.radius,2*Math.PI,0,!0),e.isStroke?this._ctx.stroke():this._ctx.fill(),this._ctx.closePath()}},{key:"_drawCandleBar",value:function(e,i,a,o,c,s,h){var l=c.open,u=c.close,f=c.high,d=c.low;u>l?(this._ctx.strokeStyle=s.upColor,this._ctx.fillStyle=s.upColor):l>u?(this._ctx.strokeStyle=s.downColor,this._ctx.fillStyle=s.downColor):(this._ctx.strokeStyle=s.noChangeColor,this._ctx.fillStyle=s.noChangeColor);var v=this._yAxis.convertToPixel(l),p=this._yAxis.convertToPixel(u),_=this._yAxis.convertToPixel(f),m=this._yAxis.convertToPixel(d),y=Math.min(v,p),g=Math.max(v,p);this._ctx.fillRect(e-.5,_,1,y-_),this._ctx.fillRect(e-.5,g,1,m-g);var k=Math.max(1,g-y);switch(h){case Qe:this._ctx.fillRect(e-i,y,a,k);break;case si:this._ctx.strokeRect(e-i+.5,y,a-1,k);break;case ci:u>l?this._ctx.strokeRect(e-i+.5,y,a-1,k):this._ctx.fillRect(e-i,y,a,k);break;case hi:u>l?this._ctx.fillRect(e-i,y,a,k):this._ctx.strokeRect(e-i+.5,y,a-1,k);break;default:this._ctx.fillRect(e-.5,_,1,m-_),this._ctx.fillRect(e-i,v-.5,i,1),this._ctx.fillRect(e,p-.5,i,1)}}}]),n}(Jt);function dt(r,t,n,e,i){r.fillStyle=t,r.fillText(i,n,e)}function Vi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Rn=function(r){F(n,r);var t=Vi(n);function n(e,i,a,o,c){var s;return E(this,n),(s=t.call(this,e,i))._xAxis=a,s._yAxis=o,s._paneId=c,s}return I(n,[{key:"_draw",value:function(){this._ctx.textBaseline="alphabetic",this._drawTag(),this._drawShape(),this._drawAnnotation();var e=this._chartStore.crosshairStore().get();if(e.kLineData){var i=this._chartStore.styleOptions().crosshair;e.paneId===this._paneId&&this._drawCrosshairLine(i,"horizontal",e.y,0,this._width,jt),e.paneId&&this._drawCrosshairLine(i,"vertical",e.realX,0,this._height,ae),this._drawTooltip(e,this._chartStore.technicalIndicatorStore().instances(this._paneId))}}},{key:"_drawAnnotation",value:function(){var e=this,i=this._chartStore.annotationStore().get(this._paneId);i&&i.forEach(function(a){a.draw(e._ctx)})}},{key:"_drawTag",value:function(){var e=this,i=this._chartStore.tagStore().get(this._paneId);i&&i.forEach(function(a){a.drawMarkLine(e._ctx)})}},{key:"_drawShape",value:function(){var e=this;this._chartStore.shapeStore().instances(this._paneId).forEach(function(a){a.draw(e._ctx)});var i=this._chartStore.shapeStore().progressInstance();i.paneId===this._paneId&&i.instance.draw(this._ctx)}},{key:"_drawTooltip",value:function(e,i){var a=this._chartStore.styleOptions().technicalIndicator;this._drawBatchTechToolTip(e,i,a,0,this._shouldDrawTooltip(e,a.tooltip))}},{key:"_drawCrosshairLine",value:function(e,i,a,o,c,s){var h=e[i],l=h.line;e.show&&h.show&&l.show&&(this._ctx.save(),this._ctx.lineWidth=l.size,this._ctx.strokeStyle=l.color,l.style===et&&this._ctx.setLineDash(l.dashValue),s(this._ctx,a,o,c),this._ctx.restore())}},{key:"_drawBatchTechToolTip",value:function(e,i,a){var o=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0;if(s){var h=a.tooltip,l=c;i.forEach(function(u){o._drawTechTooltip(e,u,a,l),l+=h.text.marginTop+h.text.size+h.text.marginBottom})}}},{key:"_drawTechTooltip",value:function(e,i,a){var o=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=a.tooltip,h=s.text,l=h.marginLeft,u=h.marginRight,f=h.size,d=h.color,v=0,p=h.marginTop+c,_=this._getTechTooltipData(e,i,a);if(this._ctx.textBaseline="top",this._ctx.font=J(f,h.weight,h.family),s.showName){var m=_.name,y=lt(this._ctx,m);dt(this._ctx,d,v+=l,p,m),v+=y,s.showParams||(v+=u)}if(s.showParams){var g=_.calcParamText,k=lt(this._ctx,g);s.showName||(v+=l),dt(this._ctx,d,v,p,g),v+=k+u}_.values.forEach(function(C){v+=l;var M="".concat(C.title).concat(C.value),B=lt(o._ctx,M);dt(o._ctx,C.color||h.color,v,p,M),v+=B+u})}},{key:"_shouldDrawTooltip",value:function(e,i){var a=i.showRule;return a===Pe||a===ui&&!!e.paneId}},{key:"_getTechTooltipData",value:function(e,i,a){var o=this._chartStore.dataList(),c=i.result,s="",h=i.calcParams;if(h.length>0){var l=h.map(function(g){return R(g)?g.value:g});s="(".concat(l.join(","),")")}var u=[];if(W(i.createToolTipDataSource))u=i.createToolTipDataSource({dataSource:{from:this._chartStore.timeScaleStore().from(),to:this._chartStore.timeScaleStore().to(),kLineDataList:this._chartStore.dataList(),technicalIndicatorDataList:c},viewport:{width:this._width,height:this._height,dataSpace:this._chartStore.timeScaleStore().dataSpace(),barSpace:this._chartStore.timeScaleStore().barSpace()},crosshair:e,technicalIndicator:i,xAxis:this._xAxis,yAxis:this._yAxis,defaultStyles:a})||[];else{var f=i.styles||a,d=c[e.dataIndex],v=i.precision,p=i.shouldFormatBigNumber,_=f.line.colors||[],m=_.length,y=0;i.plots.forEach(function(g){var k={};switch(g.type){case De:k={color:f.circle.noChangeColor};break;case Oe:k={color:f.bar.noChangeColor};break;case Me:k={color:_[y%m]||a.tooltip.text.color},y++}var C=de(o,c,e.dataIndex,g,f,k),M={};if(P(g.title)){var B=(d||{})[g.key];P(B)&&(B=xt(B,v),p&&(B=Ft(B))),M.title=g.title,M.value=B||a.tooltip.defaultValue,M.color=C.color,u.push(M)}})}return{values:u,name:i.shortName,calcParamText:s}}}]),n}(Jt);function ji(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Bn=function(r){F(n,r);var t=ji(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_createMainView",value:function(e,i){return new Ln(e,i.chartStore,i.xAxis,i.yAxis,i.paneId)}},{key:"_createOverlayView",value:function(e,i){return new Rn(e,i.chartStore,i.xAxis,i.yAxis,i.paneId)}}]),n}(je);function ye(r,t,n,e,i,a,o,c,s){Ne(r,t,i,a,o,c,s),Fn(r,n,e,i,a,o,c,s)}function Fn(r,t,n,e,i,a,o,c){r.lineWidth=n,r.strokeStyle=t,zn(r,e,i,a,o,c),r.stroke()}function Ne(r,t,n,e,i,a,o){r.fillStyle=t,zn(r,n,e,i,a,o),r.fill()}function zn(r,t,n,e,i,a){r.beginPath(),r.moveTo(t+a,n),r.arcTo(t+e,n,t+e,n+i,a),r.arcTo(t+e,n+i,t,n+i,a),r.arcTo(t,n+i,t,n,a),r.arcTo(t,n,t+e,n,a),r.closePath()}function Vn(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}function ge(r){for(var t=1;arguments.length>t;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vn(Object(n),!0).forEach(function(e){Vt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function Hi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Ni=function(r){F(n,r);var t=Hi(n);function n(e,i,a,o){var c;return E(this,n),(c=t.call(this,e,i))._yAxis=a,c._paneId=o,c}return I(n,[{key:"_draw",value:function(){var e=this._chartStore.styleOptions().yAxis;e.show&&(this._drawAxisLine(e),this._drawTickLines(e),this._drawTickLabels(e),this._drawTechLastValue(),this._drawLastPriceLabel())}},{key:"_drawAxisLine",value:function(e){var i,a=e.axisLine;a.show&&(this._ctx.strokeStyle=a.color,this._ctx.lineWidth=a.size,i=this._yAxis.isFromYAxisZero()?0:this._width-1,ae(this._ctx,i,0,this._height))}},{key:"_drawTickLines",value:function(e){var i=this,a=e.tickLine;if(a.show){this._ctx.lineWidth=a.size,this._ctx.strokeStyle=a.color;var o,c,s=a.length;this._yAxis.isFromYAxisZero()?(o=0,e.axisLine.show&&(o+=e.axisLine.size),c=o+s):(o=this._width,e.axisLine.show&&(o-=e.axisLine.size),c=o-s),this._yAxis.ticks().forEach(function(h){jt(i._ctx,h.y,o,c)})}}},{key:"_drawTickLabels",value:function(e){var i=this,a=e.tickText;if(a.show){var o,c=e.tickLine,s=c.show,h=c.length;this._yAxis.isFromYAxisZero()?(o=a.paddingLeft,e.axisLine.show&&(o+=e.axisLine.size),s&&(o+=h),this._ctx.textAlign="left"):(o=this._width-a.paddingRight,e.axisLine.show&&(o-=e.axisLine.size),s&&(o-=h),this._ctx.textAlign="right"),this._ctx.textBaseline="middle",this._ctx.font=J(a.size,a.weight,a.family),this._ctx.fillStyle=a.color,this._yAxis.ticks().forEach(function(l){i._ctx.fillText(l.v,o,l.y)}),this._ctx.textAlign="left"}}},{key:"_drawTechLastValue",value:function(){var e=this,i=this._chartStore.styleOptions().technicalIndicator,a=i.lastValueMark;if(a.show&&a.text.show){var o=this._chartStore.technicalIndicatorStore().instances(this._paneId),c=this._chartStore.dataList();o.forEach(function(s){var h=s.result||[],l=h.length,u=h[l-1]||{},f={prev:{kLineData:c[l-2],technicalIndicatorData:h[l-2]},current:{kLineData:c[l-1],technicalIndicatorData:u},next:{kLineData:null,technicalIndicatorData:null}},d=s.precision,v=s.styles||i,p=v.line.colors||[],_=p.length,m=0;s.plots.forEach(function(y){var g,k=u[y.key];switch(y.type){case De:g=y.color&&y.color(f,v)||v.circle.noChangeColor;break;case Oe:g=y.color&&y.color(f,v)||v.bar.noChangeColor;break;case Me:g=p[m%_],m++}P(k)&&e._drawMarkLabel(k,d,s.shouldFormatBigNumber,ge(ge({},a.text),{},{backgroundColor:g}))})})}}},{key:"_drawLastPriceLabel",value:function(){if(this._yAxis.isCandleYAxis()){var e=this._chartStore.styleOptions().candle.priceMark,i=e.last;if(e.show&&i.show&&i.text.show){var a=this._chartStore.dataList(),o=a[a.length-1];if(o){var c,s=o.close,h=o.open;c=s>h?i.upColor:h>s?i.downColor:i.noChangeColor,this._drawMarkLabel(s,this._chartStore.pricePrecision(),!1,ge(ge({},i.text),{},{backgroundColor:c}))}}}}},{key:"_drawMarkLabel",value:function(e,i,a,o){var c,s=o.size,h=o.weight,l=o.family,u=o.color,f=o.backgroundColor,d=o.borderRadius,v=o.paddingLeft,p=o.paddingTop,_=o.paddingRight,m=o.paddingBottom,y=this._yAxis.convertToNicePixel(e);if(this._yAxis.yAxisType()===Bt){var g=((this._chartStore.visibleDataList()[0]||{}).data||{}).close;c="".concat(((e-g)/g*100).toFixed(2),"%")}else c=xt(e,i),a&&(c=Ft(c));this._ctx.font=J(s,h,l);var k,C=lt(this._ctx,c)+v+_,M=p+s+m;k=this._yAxis.isFromYAxisZero()?0:this._width-C,Ne(this._ctx,f,k,y-p-s/2,C,M,d),this._ctx.textBaseline="middle",dt(this._ctx,u,k+v,y,c)}}]),n}(Jt);function Yi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Wi=function(r){F(n,r);var t=Yi(n);function n(e,i,a,o){var c;return E(this,n),(c=t.call(this,e,i))._yAxis=a,c._paneId=o,c}return I(n,[{key:"_draw",value:function(){this._ctx.textBaseline="middle",this._drawTag(),this._drawCrossHairLabel()}},{key:"_drawTag",value:function(){var e=this,i=this._chartStore.tagStore().get(this._paneId);i&&i.forEach(function(a){a.drawText(e._ctx)})}},{key:"_drawCrossHairLabel",value:function(){var e=this._chartStore.crosshairStore().get();if(e.paneId===this._paneId&&this._chartStore.dataList().length!==0){var i=this._chartStore.styleOptions().crosshair,a=i.horizontal,o=a.text;if(i.show&&a.show&&o.show){var c,s,h=this._yAxis.convertFromPixel(e.y);if(this._yAxis.yAxisType()===Bt){var l=(this._chartStore.visibleDataList()[0]||{}).data||{};c="".concat(((h-l.close)/l.close*100).toFixed(2),"%")}else{var u=this._chartStore.technicalIndicatorStore().instances(this._paneId),f=0,d=!1;this._yAxis.isCandleYAxis()?f=this._chartStore.pricePrecision():u.forEach(function(m){f=Math.max(m.precision,f),d||(d=m.shouldFormatBigNumber)}),c=xt(h,f),d&&(c=Ft(c))}var v=o.borderSize,p=Ht(this._ctx,c,o),_=me(o);s=this._yAxis.isFromYAxisZero()?0:this._width-p,ye(this._ctx,o.backgroundColor,o.borderColor,v,s,e.y-v-o.paddingTop-o.size/2,p,_,o.borderRadius),dt(this._ctx,o.color,s+v+o.paddingLeft,e.y,c)}}}}]),n}(Jt);function Xi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Gi=function(r){F(n,r);var t=Xi(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_createMainView",value:function(e,i){return new Ni(e,i.chartStore,i.yAxis,i.paneId)}},{key:"_createOverlayView",value:function(e,i){return new Wi(e,i.chartStore,i.yAxis,i.paneId)}}]),n}(je),jn=function(){function r(t){E(this,r),this._chartStore=t,this._width=0,this._height=0,this._cacheMinValue=0,this._cacheMaxValue=0,this._minValue=0,this._maxValue=0,this._range=0,this._ticks=[],this._initMeasureCanvas()}return I(r,[{key:"_initMeasureCanvas",value:function(){var t=ft("canvas"),n=qt(t);this._measureCtx=t.getContext("2d"),this._measureCtx.scale(n,n)}},{key:"min",value:function(){return this._minValue}},{key:"max",value:function(){return this._maxValue}},{key:"width",value:function(){return this._width}},{key:"height",value:function(){return this._height}},{key:"setWidth",value:function(t){this._width=t}},{key:"setHeight",value:function(t){this._height=t}},{key:"ticks",value:function(){return this._ticks}},{key:"computeAxis",value:function(t){var n=this._optimalMinMax(this._computeMinMax());return this._minValue=n.min,this._maxValue=n.max,this._range=n.range,!(this._cacheMinValue===n.min&&this._cacheMaxValue===n.max&&!t)&&(this._cacheMinValue=n.min,this._cacheMaxValue=n.max,this._ticks=this._optimalTicks(this._computeTicks()),!0)}},{key:"_computeMinMax",value:function(){}},{key:"_optimalMinMax",value:function(t){}},{key:"_computeTicks",value:function(){var t=[];if(this._range>=0){var n=this._computeInterval(this._range),e=n.interval,i=n.precision,a=Ie(Math.ceil(this._minValue/e)*e,i),o=Ie(Math.floor(this._maxValue/e)*e,i),c=0,s=a;if(e!==0)for(;o>=s;)t[c]={v:s.toFixed(i)},++c,s+=e}return t}},{key:"_optimalTicks",value:function(t){}},{key:"_computeInterval",value:function(t){var n,e,i,a,o=(e=Math.floor(re(n=t/8)),i=zt(e),n=(1.5>(a=n/i)?1:2.5>a?2:3.5>a?3:4.5>a?4:5.5>a?5:6.5>a?6:8)*i,-20>e?n:+n.toFixed(0>e?-e:0)),c=function(s){var h=""+s,l=h.indexOf("e");if(l>0){var u=+h.slice(l+1);return 0>u?-u:0}var f=h.indexOf(".");return 0>f?0:h.length-1-f}(o);return{interval:o,precision:c}}}]),r}();function Ui(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Hn=function(r){F(n,r);var t=Ui(n);function n(e,i,a){var o;return E(this,n),(o=t.call(this,e))._realRange=0,o._isCandleYAxis=i,o._paneId=a,o}return I(n,[{key:"_computeMinMax",value:function(){var e,i=this,a=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],o=[],c=!1,s=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER;this._chartStore.technicalIndicatorStore().instances(this._paneId).forEach(function(y){if(c||(c=y.shouldOhlc),l=Math.min(l,y.precision),O(y.minValue)&&(s=Math.min(s,y.minValue)),O(y.maxValue)&&(h=Math.max(h,y.maxValue)),y.styles){e||(e={top:0,bottom:0});var g=y.styles.margin;O(g.top)&&(e.top=Math.max(1>g.top?g.top:g.top/i._height,e.top)),O(g.bottom)&&(e.bottom=Math.max(1>g.bottom?g.bottom:g.bottom/i._height,e.bottom))}o.push({plots:y.plots,result:y.result})});var u=4;if(this._isCandleYAxis){var f=this._chartStore.pricePrecision();u=l!==Number.MAX_SAFE_INTEGER?Math.min(l,f):f}else l!==Number.MAX_SAFE_INTEGER&&(u=l);var d=this._chartStore.visibleDataList(),v=this._chartStore.styleOptions().candle,p=v.type===tn,_=v.area.value,m=this._isCandleYAxis&&!p||!this._isCandleYAxis&&c;return d.forEach(function(y){var g=y.index,k=y.data;m&&(a[0]=Math.min(a[0],k.low),a[1]=Math.max(a[1],k.high)),i._isCandleYAxis&&p&&(a[0]=Math.min(a[0],k[_]),a[1]=Math.max(a[1],k[_])),o.forEach(function(C){var M=C.result[g]||{};C.plots.forEach(function(B){var X=M[B.key];P(X)&&(a[0]=Math.min(a[0],X),a[1]=Math.max(a[1],X))})})}),a[0]!==Number.MAX_SAFE_INTEGER&&a[1]!==Number.MIN_SAFE_INTEGER?(a[0]=Math.min(s,a[0]),a[1]=Math.max(h,a[1])):(a[0]=0,a[1]=10),{min:a[0],max:a[1],precision:u,specifyMin:s,specifyMax:h,techGap:e}}},{key:"_optimalMinMax",value:function(e){var i,a,o=e.precision,c=e.specifyMin,s=e.specifyMax,h=e.techGap,l=e.min,u=e.max,f=this.yAxisType();switch(f){case Bt:var d=(this._chartStore.visibleDataList()[0]||{}).data||{};O(d.close)&&(l=(l-d.close)/d.close*100,u=(u-d.close)/d.close*100),i=.01;break;case Zt:l=re(l),u=re(u),i=.05*zt(-o);break;default:i=zt(-o)}if(l===u||i>Math.abs(l-u)){var v=c===l,p=s===u;l=v?l:p?l-8*i:l-4*i,u=p?u:v?u+8*i:u+4*i}var _,m=.2;O((a=this._isCandleYAxis?this._chartStore.styleOptions().candle.margin:h?{top:0,bottom:0}:this._chartStore.styleOptions().technicalIndicator.margin).top)&&(_=1>a.top?a.top:a.top/this._height,m=h?Math.max(h.top,_):_);var y,g=.1;O(a.bottom)&&(y=1>a.bottom?a.bottom:a.bottom/this._height,g=h?Math.max(h.bottom,y):y);var k=Math.abs(u-l);return k=Math.abs((u+=k*m)-(l-=k*g)),this._realRange=f===Zt?Math.abs(zt(u)-zt(l)):k,{min:l,max:u,range:k}}},{key:"_optimalTicks",value:function(e){var i=this,a=[],o=this.yAxisType(),c=this._chartStore.technicalIndicatorStore().instances(this._paneId),s=0,h=!1;this._isCandleYAxis?s=this._chartStore.pricePrecision():c.forEach(function(d){s=Math.max(s,d.precision),h||(h=d.shouldFormatBigNumber)});var l,u,f=this._chartStore.styleOptions().xAxis.tickText.size;return o===Zt&&(l=this._computeInterval(this._realRange)),e.forEach(function(d){var v,p=d.v,_=i._innerConvertToPixel(+p);switch(o){case Bt:v="".concat(xt(p,2),"%");break;case Zt:v=Ie(zt(p),l.precision),_=i._innerConvertToPixel(re(v)),v=xt(v,s);break;default:v=xt(p,s),h&&(v=Ft(v))}_>f&&i._height-f>_&&(u&&u-_>2*f||!u)&&(a.push({v,y:_}),u=_)}),a}},{key:"_innerConvertToPixel",value:function(e){return Math.round((1-(e-this._minValue)/this._range)*this._height)}},{key:"isCandleYAxis",value:function(){return this._isCandleYAxis}},{key:"yAxisType",value:function(){return this._isCandleYAxis?this._chartStore.styleOptions().yAxis.type:Je}},{key:"isFromYAxisZero",value:function(){var e=this._chartStore.styleOptions().yAxis;return e.position===Ut&&e.inside||e.position===$e&&!e.inside}},{key:"getSelfWidth",value:function(){var e=this,i=this._chartStore.styleOptions(),a=i.yAxis,o=a.width;if(O(o))return o;var c=0;if(a.show&&(a.axisLine.show&&(c+=a.axisLine.size),a.tickLine.show&&(c+=a.tickLine.length),a.tickText.show)){var s=0;this._measureCtx.font=J(a.tickText.size,a.tickText.weight,a.tickText.family),this._ticks.forEach(function(y){s=Math.max(s,lt(e._measureCtx,y.v))}),c+=a.tickText.paddingLeft+a.tickText.paddingRight+s}var h=i.crosshair,l=0;if(h.show&&h.horizontal.show&&h.horizontal.text.show){var u=this._chartStore.technicalIndicatorStore().instances(this._paneId),f=0,d=!1;u.forEach(function(y){f=Math.max(y.precision,f),d||(d=y.shouldFormatBigNumber)}),this._measureCtx.font=J(h.horizontal.text.size,h.horizontal.text.weight,h.horizontal.text.family);var v=2;if(this.yAxisType()!==Bt)if(this._isCandleYAxis){var p=this._chartStore.pricePrecision(),_=i.technicalIndicator.lastValueMark;v=_.show&&_.text.show?Math.max(f,p):p}else v=f;var m=xt(this._maxValue,v);d&&(m=Ft(m)),l+=h.horizontal.text.paddingLeft+h.horizontal.text.paddingRight+2*h.horizontal.text.borderSize+lt(this._measureCtx,m)}return Math.max(c,l)}},{key:"convertFromPixel",value:function(e){var i=(1-e/this._height)*this._range+this._minValue;switch(this.yAxisType()){case Bt:var a=(this._chartStore.visibleDataList()[0]||{}).data||{};if(O(a.close))return a.close*i/100+a.close;break;case Zt:return zt(i);default:return i}}},{key:"convertToPixel",value:function(e){var i;switch(this.yAxisType()){case Bt:var a=(this._chartStore.visibleDataList()[0]||{}).data||{};O(a.close)&&(i=(e-a.close)/a.close*100);break;case Zt:i=re(e);break;default:i=e}return this._innerConvertToPixel(i)}},{key:"convertToNicePixel",value:function(e){var i=this.convertToPixel(e);return Math.round(Math.max(.05*this._height,Math.min(i,.98*this._height)))}}]),n}(jn);function Zi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Nn=function(r){F(n,r);var t=Zi(n);function n(e){var i;return E(this,n),i=t.call(this,e),"height"in e&&i.setHeight(e.height),i}return I(n,[{key:"_initBefore",value:function(e){this._id=e.id,this._yAxis=this._createYAxis(e)}},{key:"_createYAxis",value:function(e){return new Hn(e.chartStore,!1,e.id)}},{key:"_createMainWidget",value:function(e,i){return new Bn({container:e,chartStore:i.chartStore,xAxis:i.xAxis,yAxis:this._yAxis,paneId:i.id})}},{key:"_createYAxisWidget",value:function(e,i){return new Gi({container:e,chartStore:i.chartStore,yAxis:this._yAxis,paneId:i.id})}},{key:"setHeight",value:function(e){$t(b(n.prototype),"setHeight",this).call(this,e),this._yAxis.setHeight(e)}},{key:"setWidth",value:function(e,i){$t(b(n.prototype),"setWidth",this).call(this,e,i),this._yAxis.setWidth(i)}},{key:"id",value:function(){return this._id}},{key:"yAxis",value:function(){return this._yAxis}}]),n}(On);function Ki(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var qi=function(r){F(n,r);var t=Ki(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_drawContent",value:function(){var e=this._chartStore.styleOptions().candle;this._drawLastPriceLine(e.priceMark),e.type===tn?this._drawArea(e):(this._drawLowHighPrice(e.priceMark,"high","high",Number.MIN_SAFE_INTEGER,[-2,-5],function(i,a){if(i>a)return i}),this._drawLowHighPrice(e.priceMark,"low","low",Number.MAX_SAFE_INTEGER,[2,5],function(i,a){if(a>i)return i}),this._drawCandle(e)),this._drawTechs(),this._drawGrid()}},{key:"_drawArea",value:function(e){var i=this,a=[],o=[],c=Number.MAX_SAFE_INTEGER,s=e.area;this._drawGraphics(function(h,l,u,f,d,v){var p=u[s.value];if(O(p)){var _=i._yAxis.convertToPixel(p);if(v===0){var m=h-f;o.push({x:m,y:i._height}),o.push({x:m,y:_}),a.push({x:m,y:_})}a.push({x:h,y:_}),o.push({x:h,y:_}),c=Math.min(c,_)}},function(){var h=o.length;if(h>0){var l=o[h-1],u=i._chartStore.timeScaleStore().halfBarSpace(),f=l.x+u;a.push({x:f,y:l.y}),o.push({x:f,y:l.y}),o.push({x:f,y:i._height})}if(a.length>0&&(i._ctx.lineWidth=s.lineSize,i._ctx.strokeStyle=s.lineColor,Kt(i._ctx,a)),o.length>0){var d=s.backgroundColor;if(V(d)){var v=i._ctx.createLinearGradient(0,i._height,0,c);try{d.forEach(function(p){v.addColorStop(p.offset,p.color)})}catch{}i._ctx.fillStyle=v}else i._ctx.fillStyle=d;yn(i._ctx,o)}})}},{key:"_drawCandle",value:function(e){var i=this;this._drawGraphics(function(a,o,c,s,h){i._drawCandleBar(a,s,h,o,c,e.bar,e.type)})}},{key:"_drawLowHighPrice",value:function(e,i,a,o,c,s){var h=e[i];if(e.show&&h.show){var l=this._chartStore.visibleDataList(),u=o,f=-1;l.forEach(function(g){var k=g.index,C=s(gt(g.data,a,o),u);C&&(u=C,f=k)});var d=this._chartStore.pricePrecision(),v=this._yAxis.convertToPixel(u),p=this._xAxis.convertToPixel(f),_=v+c[0];this._ctx.textAlign="left",this._ctx.lineWidth=1,this._ctx.strokeStyle=h.color,this._ctx.fillStyle=h.color,Kt(this._ctx,[{x:p-2,y:_+c[0]},{x:p,y:_},{x:p+2,y:_+c[0]}]);var m=_+c[1];Kt(this._ctx,[{x:p,y:_},{x:p,y:m},{x:p+5,y:m}]),this._ctx.font=J(h.textSize,h.textWeight,h.textFamily);var y=xt(u,d);this._ctx.textBaseline="middle",this._ctx.fillText(y,p+5+h.textMargin,m)}}},{key:"_drawLastPriceLine",value:function(e){var i=e.last;if(e.show&&i.show&&i.line.show){var a=this._chartStore.dataList(),o=a[a.length-1];if(o){var c,s=o.close,h=o.open,l=this._yAxis.convertToNicePixel(s);c=s>h?i.upColor:h>s?i.downColor:i.noChangeColor,this._ctx.save(),this._ctx.strokeStyle=c,this._ctx.lineWidth=i.line.size,i.line.style===et&&this._ctx.setLineDash(i.line.dashValue),jt(this._ctx,l,0,this._width),this._ctx.restore()}}}}]),n}(Ln);function $i(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Ji=function(r){F(n,r);var t=$i(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_drawTooltip",value:function(e,i){var a=this._chartStore.styleOptions(),o=a.candle,c=o.tooltip,s=a.technicalIndicator,h=s.tooltip,l=this._shouldDrawTooltip(e,c),u=this._shouldDrawTooltip(e,h);c.showType===en&&h.showType===en?this._drawCandleTooltipWithRect(e,i,o,l,s,u):c.showType===ue?(this._drawCandleTooltipWithStandard(e.kLineData,o,l),h.showType===ue?this._drawBatchTechToolTip(e,i,s,l?c.text.size+c.text.marginTop:0,u):this._drawCandleTooltipWithRect(e,i,o,!1,s,u)):(this._drawCandleTooltipWithRect(e,i,o,l,s,!1),this._drawBatchTechToolTip(e,i,s,0,u))}},{key:"_drawCandleTooltipWithStandard",value:function(e,i,a){var o=this;if(a){var c=this._getCandleTooltipData(e,i),s=i.tooltip,h=s.text.marginLeft,l=s.text.marginRight,u=s.text.size,f=s.text.color,d=s.labels;this._ctx.textBaseline="top",this._ctx.font=J(u,s.text.weight,s.text.family);var v=h,p=s.text.marginTop;d.forEach(function(_,m){var y=lt(o._ctx,_);dt(o._ctx,f,v,p,_),v+=y;var g,k,C=c[m]||s.defaultValue;R(C)?(g=C.value||s.defaultValue,k=C.color||f):(k=f,g=C);var M=lt(o._ctx,g);dt(o._ctx,k,v,p,g),v+=M+h+l})}}},{key:"_drawCandleTooltipWithRect",value:function(e,i,a,o,c,s){var h=this;if(o||s){var l=a.tooltip,u=l.labels,f=this._getCandleTooltipData(e.kLineData,a),d=l.text.marginLeft,v=l.text.marginRight,p=l.text.marginTop,_=l.text.marginBottom,m=l.text.size,y=l.text.color,g=l.rect,k=g.borderSize,C=g.paddingLeft,M=g.paddingRight,B=g.paddingTop,X=g.paddingBottom,wt=g.offsetLeft,it=g.offsetRight,K=0,H=0,Q=0;this._ctx.save(),this._ctx.textBaseline="top",o&&(this._ctx.font=J(m,l.text.weight,l.text.family),u.forEach(function(U,j){var vt,ht=f[j];vt=R(ht)?ht.value||l.defaultValue:ht;var rt="".concat(U).concat(vt),Ue=lt(h._ctx,rt)+d+v;K=Math.max(K,Ue)}),Q+=(_+p+m)*u.length);var G=c.tooltip,Mt=G.text.marginLeft,ce=G.text.marginRight,S=G.text.marginTop,x=G.text.marginBottom,A=G.text.size,T=[];if(i.forEach(function(U){T.push(h._getTechTooltipData(e,U,c))}),s&&(this._ctx.font=J(A,G.text.weight,G.text.family),T.forEach(function(U){U.values.forEach(function(j){var vt=j.title,ht=j.value;if(P(vt)){var rt="".concat(vt).concat(ht),Ue=lt(h._ctx,rt)+Mt+ce;K=Math.max(K,Ue),Q+=S+x+A}})})),(H+=K)!==0&&Q!==0){var w;H+=2*k+C+M;var N=g.offsetTop,Y=g.borderRadius;Ne(this._ctx,g.backgroundColor,w=this._width/2>e.realX?this._width-it-H:wt,N,H,Q+=2*k+B+X,Y),Fn(this._ctx,g.borderColor,k,w,N,H,Q,Y);var ct=w+k+C+d,D=N+k+B;if(o&&(this._ctx.font=J(m,l.text.weight,l.text.family),u.forEach(function(U,j){D+=p,h._ctx.textAlign="left",dt(h._ctx,y,ct,D,U);var vt,ht,rt=f[j];R(rt)?(ht=rt.color||y,vt=rt.value||l.defaultValue):(ht=y,vt=rt||l.defaultValue),h._ctx.textAlign="right",dt(h._ctx,ht,w+H-k-v-M,D,vt),D+=m+_})),s){var tt=w+k+C+Mt;this._ctx.font=J(A,G.text.weight,G.text.family),T.forEach(function(U){U.values.forEach(function(j){D+=S,h._ctx.textAlign="left",h._ctx.fillStyle=j.color||G.text.color,h._ctx.fillText(j.title,tt,D),h._ctx.textAlign="right",h._ctx.fillText(j.value,w+H-k-ce-M,D),D+=A+x})})}this._ctx.restore()}}}},{key:"_getCandleTooltipData",value:function(e,i){var a=this,o=i.tooltip.values,c=[];if(o)W(o)?c=o(e,i)||[]:V(o)&&(c=o);else{var s=this._chartStore.pricePrecision(),h=this._chartStore.volumePrecision();(c=[gt(e,"timestamp"),gt(e,"open"),gt(e,"close"),gt(e,"high"),gt(e,"low"),gt(e,"volume")]).forEach(function(l,u){switch(u){case 0:c[u]=st(a._chartStore.timeScaleStore().dateTimeFormat(),l,"YYYY-MM-DD hh:mm");break;case c.length-1:c[u]=Ft(xt(l,h));break;default:c[u]=xt(l,s)}})}return c}}]),n}(Rn);function Qi(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var tr=function(r){F(n,r);var t=Qi(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_createMainView",value:function(e,i){return new qi(e,i.chartStore,i.xAxis,i.yAxis,i.paneId)}},{key:"_createOverlayView",value:function(e,i){return new Ji(e,i.chartStore,i.xAxis,i.yAxis,i.paneId)}}]),n}(Bn);function er(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var nr=function(r){F(n,r);var t=er(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_createYAxis",value:function(e){return new Hn(e.chartStore,!0,e.id)}},{key:"_createMainWidget",value:function(e,i){return new tr({container:e,chartStore:i.chartStore,xAxis:i.xAxis,yAxis:this._yAxis,paneId:i.id})}}]),n}(Nn);function ir(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var rr=function(r){F(n,r);var t=ir(n);function n(e,i,a){var o;return E(this,n),(o=t.call(this,e,i))._xAxis=a,o}return I(n,[{key:"_draw",value:function(){var e=this._chartStore.styleOptions().xAxis;e.show&&(this._drawAxisLine(e),this._drawTickLines(e),this._drawTickLabels(e))}},{key:"_drawAxisLine",value:function(e){var i=e.axisLine;i.show&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.size,jt(this._ctx,0,0,this._width))}},{key:"_drawTickLines",value:function(e){var i=this,a=e.tickLine;if(a.show){this._ctx.lineWidth=a.size,this._ctx.strokeStyle=a.color;var o=e.axisLine.show?e.axisLine.size:0,c=o+a.length;this._xAxis.ticks().forEach(function(s){ae(i._ctx,s.x,o,c)})}}},{key:"_drawTickLabels",value:function(e){var i=e.tickText;if(i.show){var a=e.tickLine;this._ctx.textBaseline="top",this._ctx.font=J(i.size,i.weight,i.family),this._ctx.textAlign="center",this._ctx.fillStyle=i.color;var o=i.paddingTop;e.axisLine.show&&(o+=e.axisLine.size),a.show&&(o+=a.length);for(var c=this._xAxis.ticks(),s=c.length,h=0;s>h;h++)this._ctx.fillText(c[h].v,c[h].x,o)}}}]),n}(Jt);function ar(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var or=function(r){F(n,r);var t=ar(n);function n(e,i,a){var o;return E(this,n),(o=t.call(this,e,i))._xAxis=a,o}return I(n,[{key:"_draw",value:function(){this._drawCrosshairLabel()}},{key:"_drawCrosshairLabel",value:function(){var e=this._chartStore.crosshairStore().get();if(e.paneId){var i=this._chartStore.styleOptions().crosshair,a=i.vertical,o=a.text;if(i.show&&a.show&&o.show&&e.dataIndex===e.realDataIndex){var c=e.kLineData.timestamp,s=st(this._chartStore.timeScaleStore().dateTimeFormat(),c,"YYYY-MM-DD hh:mm"),h=o.paddingLeft,l=o.paddingRight,u=o.paddingTop,f=o.borderSize,d=Ht(this._ctx,s,o),v=me(o),p=d-2*f-h-l,_=e.realX-p/2;h+f>_?_=h+f:_>this._width-p-f-l&&(_=this._width-p-f-l),ye(this._ctx,o.backgroundColor,o.borderColor,f,_-f-h,0,d,v,o.borderRadius),this._ctx.textBaseline="top",dt(this._ctx,o.color,_,f+u,s)}}}}]),n}(Jt);function sr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var cr=function(r){F(n,r);var t=sr(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_createMainView",value:function(e,i){return new rr(e,i.chartStore,i.xAxis)}},{key:"_createOverlayView",value:function(e,i){return new or(e,i.chartStore,i.xAxis)}}]),n}(je);function hr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var lr=function(r){F(n,r);var t=hr(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_computeMinMax",value:function(){return{min:this._chartStore.timeScaleStore().from(),max:this._chartStore.timeScaleStore().to()-1}}},{key:"_optimalMinMax",value:function(e){var i=e.min,a=e.max;return{min:i,max:a,range:a-i+1}}},{key:"_optimalTicks",value:function(e){var i=[],a=e.length,o=this._chartStore.dataList();if(a>0){var c=this._chartStore.timeScaleStore().dateTimeFormat(),s=this._chartStore.styleOptions().xAxis.tickText;this._measureCtx.font=J(s.size,s.weight,s.family);var h=lt(this._measureCtx,"00-00 00:00"),l=this.convertToPixel(parseInt(e[0].v,10)),u=1;if(a>1){var f=this.convertToPixel(parseInt(e[1].v,10)),d=Math.abs(f-l);h>d&&(u=Math.ceil(h/d))}for(var v=0;a>v;v+=u){var p=parseInt(e[v].v,10),_=o[p].timestamp,m=st(c,_,"hh:mm");v!==0&&(m=this._optimalTickLabel(c,_,o[parseInt(e[v-u].v,10)].timestamp)||m);var y=this.convertToPixel(p);i.push({v:m,x:y,oV:_})}if(i.length===1)i[0].v=st(c,i[0].oV,"YYYY-MM-DD hh:mm");else{var g=i[0].oV,k=i[1].oV;if(i[2]){var C=i[2].v;/^[0-9]{2}-[0-9]{2}$/.test(C)?i[0].v=st(c,g,"MM-DD"):/^[0-9]{4}-[0-9]{2}$/.test(C)?i[0].v=st(c,g,"YYYY-MM"):/^[0-9]{4}$/.test(C)&&(i[0].v=st(c,g,"YYYY"))}else i[0].v=this._optimalTickLabel(c,g,k)||i[0].v}}return i}},{key:"_optimalTickLabel",value:function(e,i,a){var o=st(e,i,"YYYY"),c=st(e,i,"YYYY-MM"),s=st(e,i,"MM-DD");return o!==st(e,a,"YYYY")?o:c!==st(e,a,"YYYY-MM")?c:s!==st(e,a,"MM-DD")?s:null}},{key:"getSelfHeight",value:function(){var e=this._chartStore.styleOptions(),i=e.xAxis,a=i.height;if(O(a))return a;var o=e.crosshair,c=0;i.show&&(i.axisLine.show&&(c+=i.axisLine.size),i.tickLine.show&&(c+=i.tickLine.length),i.tickText.show&&(c+=i.tickText.paddingTop+i.tickText.paddingBottom+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+2*o.vertical.text.borderSize+o.vertical.text.size),Math.max(c,s)}},{key:"convertFromPixel",value:function(e){return this._chartStore.timeScaleStore().coordinateToDataIndex(e)}},{key:"convertToPixel",value:function(e){return this._chartStore.timeScaleStore().dataIndexToCoordinate(e)}}]),n}(jn);function ur(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var fr=function(r){F(n,r);var t=ur(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"_initBefore",value:function(){this._xAxis=new lr(this._chartStore)}},{key:"_createMainWidget",value:function(e,i){return new cr({container:e,chartStore:i.chartStore,xAxis:this._xAxis})}},{key:"xAxis",value:function(){return this._xAxis}},{key:"setWidth",value:function(e,i){$t(b(n.prototype),"setWidth",this).call(this,e,i),this._xAxis.setWidth(e)}},{key:"setHeight",value:function(e){$t(b(n.prototype),"setHeight",this).call(this,e),this._xAxis.setHeight(e)}}]),n}(On),Yn="mouse",Wn="touch";function Qt(r){return r.type===Wn}function se(r){return r.type===Yn}function Xn(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}function Gn(r){for(var t=1;arguments.length>t;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xn(Object(n),!0).forEach(function(e){Vt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var Ye=0,Un=2;function Zn(r){return r.getBoundingClientRect()||{left:0,top:0}}function Nt(r){return!!r.touches}function We(r){r.cancelable&&r.preventDefault()}function Kn(r,t){var n=r.clientX-t.clientX,e=r.clientY-t.clientY;return Math.sqrt(n*n+e*e)}var qn=function(){function r(t,n,e){E(this,r),this._target=t,this._handler=n,this._options=e,this._clickCount=0,this._clickTimeoutId=null,this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._moveExceededManhattanDistance=!1,this._cancelClick=!1,this._unsubscribeOutsideEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRoot=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventDragProcess=!1,this._mousePressed=!1,this._init()}return I(r,[{key:"setOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._options=Gn(Gn({},this.options),t)}},{key:"destroy",value:function(){this._unsubscribeOutsideEvents!==null&&(this._unsubscribeOutsideEvents(),this._unsubscribeOutsideEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeRoot!==null&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),this._clearLongTapTimeout(),this._resetClickTimeout()}},{key:"_mouseEnterHandler",value:function(t){var n=this;this._unsubscribeMousemove&&this._unsubscribeMousemove();var e=this._mouseMoveHandler.bind(this),i=this._mouseWheelHandler.bind(this);this._unsubscribeMousemove=function(){n._target.removeEventListener("mousemove",e),n._target.removeEventListener("wheel",i)},this._target.addEventListener("mousemove",e),this._target.addEventListener("wheel",i,{passive:!1}),Nt(t)&&this._mouseMoveHandler(t);var a=this._makeCompatEvent(t);this._processEvent(a,this._handler.mouseEnterEvent)}},{key:"_resetClickTimeout",value:function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null}},{key:"_mouseMoveHandler",value:function(t){if(!this._mousePressed||Nt(t)){var n=this._makeCompatEvent(t);this._processEvent(n,this._handler.mouseMoveEvent)}}},{key:"_mouseWheelHandler",value:function(t){var n=this._makeCompatEvent(t);t.localX=n.localX,t.localY=n.localY,this._processEvent(t,this._handler.mouseWheelEvent)}},{key:"_mouseMoveWithDownHandler",value:function(t){if((!("button"in t)||t.button===Ye)&&this._startPinchMiddleCoordinate===null){var n=Nt(t);if(!this._preventDragProcess||!n){this._pinchPrevented=!0;var e=this._makeCompatEvent(t),i=this._mouseMoveStartPosition,a=Math.abs(i.x-e.pageX),o=Math.abs(i.y-e.pageY),c=a+o>5;if(c||!n){if(c&&!this._moveExceededManhattanDistance&&n){var s=.5*a;o>=s&&!this._options.treatVertTouchDragAsPageScroll||s>o&&!this._options.treatHorzTouchDragAsPageScroll||(this._preventDragProcess=!0)}c&&(this._moveExceededManhattanDistance=!0,this._cancelClick=!0,n&&this._clearLongTapTimeout()),this._preventDragProcess||(this._processEvent(e,this._handler.pressedMouseMoveEvent),n&&We(t))}}}}},{key:"_mouseUpHandler",value:function(t){if(!("button"in t)||t.button===Ye){var n=this._makeCompatEvent(t);this._clearLongTapTimeout(),this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null),Nt(t)&&this._mouseLeaveHandler(t),this._processEvent(n,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1?(this._processEvent(n,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(n,this._handler.mouseClickEvent),Nt(t)&&(We(t),this._mouseLeaveHandler(t),t.touches.length===0&&(this._longTapActive=!1))}}},{key:"_clearLongTapTimeout",value:function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}},{key:"_mouseDownHandler",value:function(t){if(!("button"in t)||t.button===Ye||t.button===Un){var n=this._makeCompatEvent(t);if("button"in t&&t.button===Un)this._processEvent(n,this._handler.mouseRightDownEvent);else{this._cancelClick=!1,this._moveExceededManhattanDistance=!1,this._preventDragProcess=!1,Nt(t)&&this._mouseEnterHandler(t),this._mouseMoveStartPosition={x:n.pageX,y:n.pageY},this._unsubscribeRoot&&(this._unsubscribeRoot(),this._unsubscribeRoot=null);var e=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this),a=this._target.ownerDocument.documentElement;this._unsubscribeRoot=function(){a.removeEventListener("touchmove",e),a.removeEventListener("touchend",i),a.removeEventListener("mousemove",e),a.removeEventListener("mouseup",i)},a.addEventListener("touchmove",e,{passive:!1}),a.addEventListener("touchend",i,{passive:!1}),this._clearLongTapTimeout(),Nt(t)&&t.touches.length===1?this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),600):(a.addEventListener("mousemove",e),a.addEventListener("mouseup",i)),this._mousePressed=!0,this._processEvent(n,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))}}}},{key:"_init",value:function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));var n,e=this._target.ownerDocument,i=function(a){t._handler.mouseDownOutsideEvent&&(a.target&&t._target.contains(a.target)||t._handler.mouseDownOutsideEvent())};this._unsubscribeOutsideEvents=function(){e.removeEventListener("mousedown",i),e.removeEventListener("touchstart",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0}),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._mouseDownHandler.bind(this),{passive:!0}),n="ontouchstart"in window||!!(window.DocumentTouch&&document instanceof window.DocumentTouch),"onorientationchange"in window&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints||n)||this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})}},{key:"_initPinch",value:function(){var t=this;this._handler.pinchStartEvent===void 0&&this._handler.pinchEvent===void 0&&this._handler.pinchEndEvent===void 0||(this._target.addEventListener("touchstart",function(n){return t._checkPinchState(n.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(n){if(n.touches.length===2&&t._startPinchMiddleCoordinate!==null&&t._handler.pinchEvent!==void 0){var e=Kn(n.touches[0],n.touches[1]);t._handler.pinchEvent(t._startPinchMiddleCoordinate,e/t._startPinchDistance),We(n)}},{passive:!1}),this._target.addEventListener("touchend",function(n){t._checkPinchState(n.touches)}))}},{key:"_checkPinchState",value:function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)}},{key:"_startPinch",value:function(t){var n=Zn(this._target);this._startPinchMiddleCoordinate={x:(t[0].clientX-n.left+(t[1].clientX-n.left))/2,y:(t[0].clientY-n.top+(t[1].clientY-n.top))/2},this._startPinchDistance=Kn(t[0],t[1]),this._handler.pinchStartEvent!==void 0&&this._handler.pinchStartEvent(),this._clearLongTapTimeout()}},{key:"_stopPinch",value:function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,this._handler.pinchEndEvent!==void 0&&this._handler.pinchEndEvent())}},{key:"_mouseLeaveHandler",value:function(t){this._unsubscribeMousemove&&this._unsubscribeMousemove();var n=this._makeCompatEvent(t);this._processEvent(n,this._handler.mouseLeaveEvent)}},{key:"_longTapHandler",value:function(t){var n=this._makeCompatEvent(t);this._processEvent(n,this._handler.longTapEvent),this._cancelClick=!0,this._longTapActive=!0}},{key:"_processEvent",value:function(t,n){n&&n.call(this._handler,t)}},{key:"_makeCompatEvent",value:function(t){var n;n="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var e=Zn(this._target);return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-e.left,localY:n.clientY-e.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type.startsWith("mouse")?Yn:Wn,target:n.target,view:t.view}}}]),r}(),dr=function(){function r(t,n,e,i,a,o){E(this,r),this._chartStore=n,this._topPaneId=e,this._bottomPaneId=i,this._dragEnabled=a,this._width=0,this._offsetLeft=0,this._dragEventHandler=o,this._dragFlag=!1,this._initElement(t),this._initEvent(a)}return I(r,[{key:"_initElement",value:function(t){this._container=t,this._wrapper=ft("div",{margin:"0",padding:"0",position:"relative",boxSizing:"border-box"}),this._element=ft("div",{width:"100%",height:"7px",margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box"}),this._wrapper.appendChild(this._element);var n=t.lastChild;n?t.insertBefore(this._wrapper,n):t.appendChild(this._wrapper)}},{key:"_initEvent",value:function(t){t&&(this._element.style.cursor="ns-resize",this._dragEvent=new qn(this._element,{mouseDownEvent:this._mouseDownEvent.bind(this),mouseUpEvent:this._mouseUpEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this),mouseEnterEvent:this._mouseEnterEvent.bind(this),mouseLeaveEvent:this._mouseLeaveEvent.bind(this)},{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0}))}},{key:"_mouseDownEvent",value:function(t){this._dragFlag=!0,this._startY=t.pageY,this._dragEventHandler.startDrag(this._topPaneId,this._bottomPaneId)}},{key:"_mouseUpEvent",value:function(){this._dragFlag=!1,this._chartStore.setDragPaneFlag(!1)}},{key:"_pressedMouseMoveEvent",value:function(t){this._dragEventHandler.drag(t.pageY-this._startY,this._topPaneId,this._bottomPaneId),this._chartStore.setDragPaneFlag(!0),this._chartStore.crosshairStore().set()}},{key:"_mouseEnterEvent",value:function(){var t=this._chartStore.styleOptions().separator;this._element.style.background=t.activeBackgroundColor,this._chartStore.crosshairStore().set()}},{key:"_mouseLeaveEvent",value:function(){this._dragFlag||(this._element.style.background=null,this._chartStore.setDragPaneFlag(!1))}},{key:"height",value:function(){return this._wrapper.offsetHeight}},{key:"setSize",value:function(t,n){this._offsetLeft=t,this._width=n,this.invalidate()}},{key:"setDragEnabled",value:function(t){t!==this._dragEnabled&&(this._dragEnabled=t,t?!this._dragEvent&&this._initEvent(t):(this._element.style.cursor="default",this._dragEvent&&this._dragEvent.destroy(),this._dragEvent=null))}},{key:"topPaneId",value:function(){return this._topPaneId}},{key:"bottomPaneId",value:function(){return this._bottomPaneId}},{key:"updatePaneId",value:function(t,n){P(t)&&(this._topPaneId=t),P(n)&&(this._bottomPaneId=n)}},{key:"invalidate",value:function(){var t=this._chartStore.styleOptions().separator;this._element.style.top="".concat(-Math.floor((7-t.size)/2),"px"),this._wrapper.style.backgroundColor=t.color,this._wrapper.style.height="".concat(t.size,"px"),this._wrapper.style.marginLeft="".concat(t.fill?0:this._offsetLeft,"px"),this._wrapper.style.width=t.fill?"100%":"".concat(this._width,"px")}},{key:"getImage",value:function(){var t=this._chartStore.styleOptions().separator,n=this._wrapper.offsetWidth,e=t.size,i=ft("canvas",{width:"".concat(n,"px"),height:"".concat(e,"px"),boxSizing:"border-box"}),a=i.getContext("2d"),o=qt(i);return i.width=n*o,i.height=e*o,a.scale(o,o),a.fillStyle=t.color,a.fillRect(this._offsetLeft,0,n,e),i}},{key:"destroy",value:function(){this._dragEvent&&this._dragEvent.destroy(),this._container.removeChild(this._wrapper)}}]),r}(),Xe=I(function r(t){E(this,r),this._chartStore=t});function vr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var pr=function(r){F(n,r);var t=vr(n);function n(e){var i;return E(this,n),(i=t.call(this,e))._startScrollCoordinate=null,i._touchCoordinate=null,i._touchCancelCrosshair=!1,i._touchZoomed=!1,i._pinchScale=1,i}return I(n,[{key:"pinchStartEvent",value:function(){this._pinchScale=1,this._touchZoomed=!0}},{key:"pinchEvent",value:function(e,i){var a=5*(i-this._pinchScale);this._pinchScale=i,this._chartStore.timeScaleStore().zoom(a,e)}},{key:"mouseUpEvent",value:function(){this._startScrollCoordinate=null}},{key:"mouseLeaveEvent",value:function(e){this._startScrollCoordinate=null,se(e)&&this._chartStore.crosshairStore().set()}},{key:"mouseMoveEvent",value:function(e){se(e)&&this._chartStore.crosshairStore().set({x:e.localX,y:e.paneY,paneId:e.paneId})}},{key:"mouseWheelEvent",value:function(e){if(Math.abs(e.deltaX)>Math.abs(e.deltaY)){if(e.cancelable&&e.preventDefault(),Math.abs(e.deltaX)===0)return;this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(-e.deltaX)}else{var i=-e.deltaY/100;if(i===0)return;switch(e.cancelable&&e.preventDefault(),e.deltaMode){case e.DOM_DELTA_PAGE:i*=120;break;case e.DOM_DELTA_LINE:i*=32}if(i!==0){var a=Math.sign(i)*Math.min(1,Math.abs(i));this._chartStore.timeScaleStore().zoom(a,{x:e.localX,y:e.localY})}}}},{key:"mouseClickEvent",value:function(e){Qt(e)&&(this._touchCoordinate||this._touchCancelCrosshair||this._touchZoomed||(this._touchCoordinate={x:e.localX,y:e.localY},this._chartStore.crosshairStore().set({x:e.localX,y:e.paneY,paneId:e.paneId})))}},{key:"mouseDownEvent",value:function(e){if(this._startScrollCoordinate={x:e.localX,y:e.localY},this._chartStore.timeScaleStore().startScroll(),Qt(e))if(this._touchZoomed=!1,this._touchCoordinate){var i=e.localX-this._touchCoordinate.x,a=e.localY-this._touchCoordinate.y;10>Math.sqrt(i*i+a*a)?(this._touchCoordinate={x:e.localX,y:e.localY},this._chartStore.crosshairStore().set({x:e.localX,y:e.paneY,paneId:e.paneId})):(this._touchCancelCrosshair=!0,this._touchCoordinate=null,this._chartStore.crosshairStore().set())}else this._touchCancelCrosshair=!1}},{key:"pressedMouseMoveEvent",value:function(e){var i={x:e.localX,y:e.paneY,paneId:e.paneId};if(Qt(e)){if(this._touchCoordinate)return this._touchCoordinate={x:e.localX,y:e.localY},void this._chartStore.crosshairStore().set(i);i=null}if(this._startScrollCoordinate){var a=e.localX-this._startScrollCoordinate.x;this._chartStore.timeScaleStore().scroll(a,i)}}},{key:"longTapEvent",value:function(e){Qt(e)&&(this._touchCoordinate={x:e.localX,y:e.localY},this._chartStore.crosshairStore().set({x:e.localX,y:e.paneY,paneId:e.paneId}))}}]),n}(Xe);function $n(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,e)}return n}function _r(r){for(var t=1;arguments.length>t;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$n(Object(n),!0).forEach(function(e){Vt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function Ge(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return Jn(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return Jn(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function Jn(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}function mr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var yr=function(r){F(n,r);var t=mr(n);function n(e,i){var a;return E(this,n),(a=t.call(this,e))._yAxis=i,a}return I(n,[{key:"_performOverlayMouseHover",value:function(e,i,a,o){var c;if(e){var s,h=Ge(e);try{for(h.s();!(s=h.n()).done&&!(c=s.value.checkEventCoordinateOn(a)););}catch(l){h.e(l)}finally{h.f()}c&&i.id===c.id||(i.id&&i.instance&&se(o)&&i.instance.onMouseLeave({id:i.id,points:i.instance.points(),event:o}),c&&c.id!==i.id&&c.instance&&se(o)&&c.instance.onMouseEnter({id:c.id,points:c.instance.points(),event:o}))}return c}},{key:"mouseUpEvent",value:function(){this._chartStore.shapeStore().updatePressedInstance()}},{key:"mouseMoveEvent",value:function(e){if(se(e)){if(this._waitingForMouseMove)return!1;this._waitingForMouseMove=!0;var i,a,o,c={x:e.localX,y:e.paneY},s=this._chartStore.shapeStore().progressInstance(),h=s.instance,l=s.paneId;if(h&&h.isDrawing())e.paneId&&(h.isStart()&&this._chartStore.shapeStore().updateProgressInstance(this._yAxis(e.paneId),e.paneId),l===e.paneId&&h.mouseMoveForDrawing(c,e),i={id:h.id(),element:Pt,elementIndex:h.points().length-1}),a={id:"",element:Tt,elementIndex:-1};else{var u=this._chartStore.annotationStore().get(e.paneId),f=this._chartStore.shapeStore().instances(e.paneId),d=this._chartStore.shapeStore().eventOperate().hover,v=this._chartStore.annotationStore().eventOperate();i=this._performOverlayMouseHover(f,d,c,e),o=this._performOverlayMouseHover(u,v,c,e)}this._chartStore.shapeStore().setEventOperate({hover:i||{id:"",element:Tt,elementIndex:-1},click:a}),this._chartStore.annotationStore().setEventOperate(o||{id:""}),this._waitingForMouseMove=!1}}},{key:"mouseDownEvent",value:function(e){var i,a={x:e.localX,y:e.paneY},o=this._chartStore.shapeStore().progressInstance(),c=o.instance,s={id:"",element:Tt,elementIndex:-1},h=o.paneId;if(c&&c.isDrawing())Qt(e)&&(c.isStart()&&(this._chartStore.shapeStore().updateProgressInstance(this._yAxis(e.paneId),e.paneId),h=e.paneId),h===e.paneId&&c.mouseMoveForDrawing(a,e)),h===e.paneId&&(c.mouseLeftButtonDownForDrawing(),i={id:c.id(),element:Pt,elementIndex:c.points().length-1},s={id:c.id(),element:Pt,elementIndex:c.points().length-1});else{var l,u=Ge(this._chartStore.shapeStore().instances(e.paneId));try{for(u.s();!(l=u.n()).done;){var f=l.value;if(i=f.checkEventCoordinateOn(a)){this._chartStore.shapeStore().updatePressedInstance(f,e.paneId,i.element),i.element===Pt?s=_r({},i):f.startPressedOtherMove(a),f.onClick({id:i.id,points:f.points(),event:e});break}}}catch(y){u.e(y)}finally{u.f()}var d=this._chartStore.annotationStore().get(e.paneId);if(d){var v,p=Ge(d);try{for(p.s();!(v=p.n()).done;){var _=v.value,m=_.checkEventCoordinateOn(a);if(m){_.onClick({id:m.id,points:_.points(),event:e});break}}}catch(y){p.e(y)}finally{p.f()}}}this._chartStore.shapeStore().setEventOperate({hover:s,click:i||{id:"",element:Tt,elementIndex:-1}})&&this._chartStore.invalidate(ut)}},{key:"mouseRightDownEvent",value:function(e){var i,a=this._chartStore.shapeStore().progressInstance().instance;a?i=a:i=this._chartStore.shapeStore().instances(e.paneId).find(function(s){return s.checkEventCoordinateOn({x:e.localX,y:e.paneY})}),i&&!i.onRightClick({id:i.id(),points:i.points(),event:e})&&this._chartStore.shapeStore().removeInstance(i.id());var o=this._chartStore.annotationStore().get(e.paneId);if(o){var c=o.find(function(s){return s.checkEventCoordinateOn({x:e.localX,y:e.paneY})});c&&c.onRightClick({id:c.id(),points:c.points(),event:e})}}},{key:"pressedMouseMoveEvent",value:function(e){var i=this._chartStore.shapeStore().pressedInstance(),a=i.instance;if(a&&i.paneId===e.paneId){var o={x:e.localX,y:e.paneY};i.element===Pt?a.mousePressedPointMove(o,e):a.mousePressedOtherMove(o,e),this._chartStore.crosshairStore().set({x:e.localX,y:e.paneY,paneId:e.paneId})}}}]),n}(Xe);function gr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var xr="Equal",Sr="Minus",kr="ArrowLeft",br="ArrowRight",wr=function(r){F(n,r);var t=gr(n);function n(){return E(this,n),t.apply(this,arguments)}return I(n,[{key:"keyBoardDownEvent",value:function(e){if(e.shiftKey)switch(e.code){case xr:this._chartStore.timeScaleStore().zoom(.5);break;case Sr:this._chartStore.timeScaleStore().zoom(-.5);break;case kr:this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(-3*this._chartStore.timeScaleStore().dataSpace());break;case br:this._chartStore.timeScaleStore().startScroll(),this._chartStore.timeScaleStore().scroll(3*this._chartStore.timeScaleStore().dataSpace())}}}]),n}(Xe),Er=function(){function r(t,n,e){E(this,r),this._target=t,this._chartStore=n,this._chartContentLeftRight={},this._chartContentTopBottom={},this._paneContentSize={},this._event=new qn(this._target,{pinchStartEvent:this._pinchStartEvent.bind(this),pinchEvent:this._pinchEvent.bind(this),mouseUpEvent:this._mouseUpEvent.bind(this),mouseClickEvent:this._mouseClickEvent.bind(this),mouseDownEvent:this._mouseDownEvent.bind(this),mouseRightDownEvent:this._mouseRightDownEvent.bind(this),mouseLeaveEvent:this._mouseLeaveEvent.bind(this),mouseMoveEvent:this._mouseMoveEvent.bind(this),mouseWheelEvent:this._mouseWheelEvent.bind(this),pressedMouseMoveEvent:this._pressedMouseMoveEvent.bind(this),longTapEvent:this._longTapEvent.bind(this)},{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1}),this._boundKeyBoardDownEvent=this._keyBoardDownEvent.bind(this),this._target.addEventListener("keydown",this._boundKeyBoardDownEvent),this._boundContextMenuEvent=function(i){i.preventDefault()},this._target.addEventListener("contextmenu",this._boundContextMenuEvent,!1),this._zoomScrollEventHandler=new pr(n),this._overlayEventHandler=new yr(n,e),this._keyBoardEventHandler=new wr(n)}return I(r,[{key:"_keyBoardDownEvent",value:function(t){this._keyBoardEventHandler.keyBoardDownEvent(t)}},{key:"_pinchStartEvent",value:function(){this._zoomScrollEventHandler.pinchStartEvent()}},{key:"_pinchEvent",value:function(t,n){this._zoomScrollEventHandler.pinchEvent(t,n)}},{key:"_mouseUpEvent",value:function(t){this._checkEventInChartContent(t)&&(this._target.style.cursor="crosshair"),this._zoomScrollEventHandler.mouseUpEvent(t),this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseUpEvent(t)}},{key:"_mouseLeaveEvent",value:function(t){this._zoomScrollEventHandler.mouseLeaveEvent(t)}},{key:"_mouseMoveEvent",value:function(t){if(t.target instanceof HTMLCanvasElement)if(this._checkEventInChartContent(t)){this._target.style.cursor="crosshair";var n=this._compatChartEvent(t,!0);this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseMoveEvent(n),this._chartStore.dragPaneFlag()||this._zoomScrollEventHandler.mouseMoveEvent(n)}else this._target.style.cursor="default",this._zoomScrollEventHandler.mouseLeaveEvent(t);else this._target.style.cursor="default",this._chartStore.crosshairStore().set()}},{key:"_mouseWheelEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&this._zoomScrollEventHandler.mouseWheelEvent(this._compatChartEvent(t))}},{key:"_mouseClickEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&(this._zoomScrollEventHandler.mouseClickEvent(this._compatChartEvent(t,!0)),this._modifyEventOptions(t))}},{key:"_mouseDownEvent",value:function(t){if(this._checkEventInChartContent(t)){this._target.style.cursor="pointer";var n=this._compatChartEvent(t,!0);this._shouldPerformOverlayEvent()&&this._overlayEventHandler.mouseDownEvent(n),this._checkZoomScroll()&&(this._zoomScrollEventHandler.mouseDownEvent(n),this._modifyEventOptions(t))}}},{key:"_mouseRightDownEvent",value:function(t){this._shouldPerformOverlayEvent()&&this._checkEventInChartContent(t)&&this._overlayEventHandler.mouseRightDownEvent(this._compatChartEvent(t,!0))}},{key:"_pressedMouseMoveEvent",value:function(t){if(this._checkEventInChartContent(t)){var n=this._compatChartEvent(t,!0);this._checkZoomScroll()?(this._zoomScrollEventHandler.pressedMouseMoveEvent(n),this._modifyEventOptions(t)):this._overlayEventHandler.pressedMouseMoveEvent(n)}}},{key:"_longTapEvent",value:function(t){this._checkZoomScroll()&&this._checkEventInChartContent(t)&&(this._zoomScrollEventHandler.longTapEvent(this._compatChartEvent(t,!0)),this._modifyEventOptions(t))}},{key:"_checkZoomScroll",value:function(){return!this._chartStore.dragPaneFlag()&&!this._chartStore.shapeStore().isPressed()&&!this._chartStore.shapeStore().isDrawing()}},{key:"_shouldPerformOverlayEvent",value:function(){return!this._chartStore.shapeStore().isEmpty()||!this._chartStore.annotationStore().isEmpty()}},{key:"_modifyEventOptions",value:function(t){Qt(t)&&this._chartStore.crosshairStore().get().paneId?this._event.setOptions({treatVertTouchDragAsPageScroll:!1}):this._event.setOptions({treatVertTouchDragAsPageScroll:!0})}},{key:"_compatChartEvent",value:function(t,n){if(n){for(var e in this._paneContentSize)if(Object.prototype.hasOwnProperty.call(this._paneContentSize,e)){var i=this._paneContentSize[e];if(t.localY>i.contentTop&&i.contentBottom>t.localY){t.paneY=t.localY-i.contentTop,t.paneId=e;break}}}return t.localX-=this._chartContentLeftRight.contentLeft,t}},{key:"_checkEventInChartContent",value:function(t){return t.localX>this._chartContentLeftRight.contentLeft&&this._chartContentLeftRight.contentRight>t.localX&&t.localY>this._chartContentTopBottom.contentTop&&this._chartContentTopBottom.contentBottom>t.localY}},{key:"setChartContentLeftRight",value:function(t){this._chartContentLeftRight=t}},{key:"setChartContentTopBottom",value:function(t){this._chartContentTopBottom=t}},{key:"setPaneContentSize",value:function(t){this._paneContentSize=t}},{key:"destroy",value:function(){this._event.destroy(),this._target.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._target.removeEventListener("contextmenu",this._boundContextMenuEvent)}}]),r}();function Pr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,n=0;return function(){var e=Date.now(),i=this,a=arguments;e-n>t&&(r.apply(i,a),n=e)}}function Cr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Ar=function(r){F(n,r);var t=Cr(n);function n(e){var i,a=e.id,o=e.point,c=e.chartStore,s=e.xAxis,h=e.yAxis,l=e.styles;return E(this,n),(i=t.call(this,{id:a,chartStore:c,xAxis:s,yAxis:h}))._point=o,i._symbolCoordinate={},i.setStyles(l,c.styleOptions().annotation),i}return I(n,[{key:"_drawSymbol",value:function(e,i,a){var o=this._chartStore.timeScaleStore().barSpace(),c=a.symbol,s=c.size,h=c.activeSize,l=i?O(h)?h:o:O(s)?s:o,u=i?c.activeColor:c.color;switch(c.type){case nn:Re(e,u,this._symbolCoordinate,l/2);break;case rn:(function(f,d,v,p,_,m){f.fillStyle=d,f.fillRect(v,p,_,m)})(e,u,this._symbolCoordinate.x-l/2,this._symbolCoordinate.y-l/2,l,l);break;case Ce:(function(f,d,v,p,_){f.fillStyle=d,f.beginPath(),f.moveTo(v.x-p/2,v.y),f.lineTo(v.x,v.y-_/2),f.lineTo(v.x+p/2,v.y),f.lineTo(v.x,v.y+_/2),f.closePath(),f.fill()})(e,u,this._symbolCoordinate,l,l);break;case an:(function(f,d,v,p,_){f.fillStyle=d,f.beginPath(),f.moveTo(v.x-p/2,v.y+_/2),f.lineTo(v.x,v.y-_/2),f.lineTo(v.x+p/2,v.y+_/2),f.closePath(),f.fill()})(e,u,this._symbolCoordinate,l,l);break;case on:e.save(),this.drawCustomSymbol({ctx:e,point:this._point,coordinate:this._symbolCoordinate,viewport:{width:this._xAxis.width(),height:this._yAxis.height(),barSpace:o},styles:c,isActive:i}),e.restore()}}},{key:"draw",value:function(e){var i=this._styles||this._chartStore.styleOptions().annotation,a=i.offset||[0,0],o=0;switch(i.position){case sn:o=this._yAxis.convertToPixel(this._point.value);break;case Ae:o=0;break;case cn:o=this._yAxis.height()}this._symbolCoordinate.y=o+a[0];var c=this._id===this._chartStore.annotationStore().eventOperate().id;this._drawSymbol(e,c,i),this.drawExtend&&(e.save(),this.drawExtend({ctx:e,point:this._point,coordinate:this._symbolCoordinate,viewport:{width:this._xAxis.width(),height:this._yAxis.height()},styles:i,isActive:c}),e.restore())}},{key:"checkEventCoordinateOn",value:function(e){var i,a,o,c,s,h=this._chartStore.timeScaleStore().barSpace(),l=(this._styles||this._chartStore.styleOptions().annotation).symbol,u=O(l.size)?l.size:h;switch(l.type){case nn:i=_n(this._symbolCoordinate,u/2,e);break;case rn:i=function(f,d,v){return!(f.x>v.x||v.x>d.x||f.y>v.y||v.y>d.y)}({x:this._symbolCoordinate.x-u/2,y:this._symbolCoordinate.y-u/2},{x:this._symbolCoordinate.x+u/2,y:this._symbolCoordinate.y+u/2},e);break;case Ce:i=(o=u)*(c=u)/2+2>Math.abs((a=this._symbolCoordinate).x-(s=e).x)*c+Math.abs(a.y-s.y)*o;break;case an:i=function(f,d){var v=ve(f[0],f[1],f[2]),p=ve(f[0],f[1],d)+ve(f[0],f[2],d)+ve(f[1],f[2],d);return 2>Math.abs(v-p)}([{x:this._symbolCoordinate.x-u/2,y:this._symbolCoordinate.y+u/2},{x:this._symbolCoordinate.x,y:this._symbolCoordinate.y-u/2},{x:this._symbolCoordinate.x+u/2,y:this._symbolCoordinate.y+u/2}],e);break;case on:i=this.checkEventCoordinateOnCustomSymbol({eventCoordinate:e,coordinate:this._symbolCoordinate,size:u})}if(i)return{id:this._id,instance:this}}},{key:"createSymbolCoordinate",value:function(e){var i=this._styles||this._chartStore.styleOptions().annotation;this._symbolCoordinate={x:e+(i.offset||[0,0])[1]}}},{key:"points",value:function(){return this._point}},{key:"checkEventCoordinateOnCustomSymbol",value:function(e){}},{key:"drawCustomSymbol",value:function(e){}}]),n}(Le);function Ir(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,e=b(r);if(t){var i=b(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return z(this,n)}}var Tr=function(r){F(n,r);var t=Ir(n);function n(e){var i,a=e.id,o=e.point,c=e.text,s=e.mark,h=e.chartStore,l=e.xAxis,u=e.yAxis,f=e.styles;return E(this,n),(i=t.call(this,{id:a,chartStore:h,xAxis:l,yAxis:u}))._point=o||{},i._text=c,i._mark=s,i.setStyles(f,h.styleOptions().tag),i}return I(n,[{key:"update",value:function(e){var i=e.point,a=e.text,o=e.mark,c=e.styles,s=!1;return R(i)&&(this._point=i,s=!0),P(a)&&(this._text=a,s=!0),P(o)&&(this._mark=o,s=!0),this.setStyles(c,this._chartStore.styleOptions().tag)&&(s=!0),s}},{key:"drawMarkLine",value:function(e){var i=this._chartStore.styleOptions(),a=i.yAxis,o=this._styles||i.tag,c=this._getY(o);e.save(),this._drawLine(e,c,o,a),this._drawMark(e,c,o,a),e.restore()}},{key:"drawText",value:function(e){if(P(this._text)){var i=this._chartStore.styleOptions(),a=this._styles||i.tag,o=a.text;e.save();var c,s=Ht(e,this._text,o),h=me(o);c=this._yAxis.isFromYAxisZero()?0:this._yAxis.width()-s;var l=this._getY(a);ye(e,o.backgroundColor,o.borderColor,o.borderSize,c,l-h/2,s,h,o.borderRadius),dt(e,o.color,c+o.paddingLeft,l,this._text),e.restore()}}},{key:"_drawLine",value:function(e,i,a,o){var c=a.line;if(c.show){e.save();var s=Ht(e,this._text,a.text),h=Ht(e,this._mark,a.mark);e.strokeStyle=c.color,e.lineWidth=c.size,c.style===et&&e.setLineDash(c.dashValue);var l=a.mark.offset,u=[],f=P(this._text),d=P(this._mark);o.inside?o.position===Ut?f&&d?l>0?(u.push([s,s+l]),u.push([s+l+h,this._xAxis.width()])):u.push(Math.min(s,h)>Math.abs(l)?[s+l+h,this._xAxis.width()]:[Math.max(s,h),this._xAxis.width()]):f?u.push([s,this._xAxis.width()]):d?l>0?(u.push([0,l]),u.push([l+h,this._xAxis.width()])):u.push(h>Math.abs(l)?[l+h,this._xAxis.width()]:[0,this._xAxis.width()]):u.push([0,this._xAxis.width()]):f&&d?0>l?(u.push([0,this._xAxis.width()-s+l-h]),u.push([this._xAxis.width()-s+l,this._xAxis.width()-s])):u.push(Math.min(s,h)>l?[0,this._xAxis.width()-s-h+l]:[0,this._xAxis.width()-Math.max(s,h)]):f?u.push([0,this._xAxis.width()-s]):d?0>l?(u.push([0,this._xAxis.width()+l-h]),u.push([this._xAxis.width()+l,this._xAxis.width()])):u.push(h>l?[0,this._xAxis.width()-h+l]:[0,this._xAxis.width()]):u.push([0,this._xAxis.width()]):o.position===Ut?d?l>0?(u.push([0,l]),u.push([l+h,this._xAxis.width()])):u.push(h>Math.abs(l)?[h+l,this._xAxis.width()]:[0,this._xAxis.width()]):u.push([0,this._xAxis.width()]):d?0>l?(u.push([0,this._xAxis.width()-h+l]),u.push([this._xAxis.width()+l,this._xAxis.width()])):u.push(h>l?[0,this._xAxis.width()-h+l]:[0,this._xAxis.width()]):u.push([0,this._xAxis.width()]),u.forEach(function(v){jt(e,i,v[0],v[1])}),e.restore()}}},{key:"_drawMark",value:function(e,i,a,o){if(P(this._mark)){var c,s=a.mark,h=Ht(e,this._mark,s),l=me(s);if(o.inside){var u=0;P(this._text)&&(u=Ht(e,this._text,a.text)),c=o.position===Ut?u:this._xAxis.width()-u-h}else c=o.position===Ut?0:this._xAxis.width()-h;ye(e,s.backgroundColor,s.borderColor,s.borderSize,c+=s.offset,i-l/2,h,l,s.borderRadius),e.textBaseline="middle",e.font=J(s.size,s.weight,s.family),dt(e,s.color,c+s.paddingLeft,i,this._mark)}}},{key:"_getY",value:function(e){var i=e.offset;switch(e.position){case Ae:return i;case cn:return this._yAxis.height()+i;default:return this._yAxis.convertToNicePixel(this._point.value)+i}}}]),n}(Le);function Qn(r,t){var n=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(s,h){if(!!s){if(typeof s=="string")return ti(s,h);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return ti(s,h)}}(r))||t&&r&&typeof r.length=="number"){n&&(r=n);var e=0,i=function(){};return{s:i,n:function(){return r.length>e?{done:!1,value:r[e++]}:{done:!0}},e:function(s){throw s},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(r)},n:function(){var s=n.next();return o=s.done,s},e:function(s){c=!0,a=s},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function ti(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=Array(t);t>n;n++)e[n]=r[n];return e}var Mr="technical_indicator_pane_",nt="candle_pane",Or=function(){function r(t,n){var e=this;E(this,r),this._initChartContainer(t),this._shapeBaseId=0,this._paneBaseId=0,this._separatorDragStartTopPaneHeight=0,this._separatorDragStartBottomPaneHeight=0,this._chartStore=new Bi(n,{invalidate:this._invalidatePane.bind(this),crosshair:this._crosshairObserver.bind(this)}),this._xAxisPane=new fr({id:"x_axis_pane",container:this._chartContainer,chartStore:this._chartStore}),this._panes=new Map([[nt,new nr({container:this._chartContainer,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),id:nt})]]),this._separators=new Map,this._chartWidth={},this._chartHeight={},this._chartEvent=new Er(this._chartContainer,this._chartStore,function(i){return e._panes.get(i).yAxis()}),this.adjustPaneViewport(!0,!0,!0)}return I(r,[{key:"_initChartContainer",value:function(t){this._container=t,this._chartContainer=ft("div",{userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent",position:"relative",outline:"none",borderStyle:"none",width:"100%",cursor:"crosshair",boxSizing:"border-box"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)}},{key:"_crosshairObserver",value:function(t){var n=this,e=t.paneId,i=t.dataIndex,a=t.kLineData,o=t.x,c=t.y;if(this._chartStore.actionStore().has(At.CROSSHAIR)||this._chartStore.actionStore().has(At.TOOLTIP)){var s={};this._panes.forEach(function(h,l){var u={},f=[];n.chartStore().technicalIndicatorStore().instances(l).forEach(function(d){var v=d.result[i];u[d.name]=v,f.push({name:d.name,data:v})}),s[l]=u,n._chartStore.actionStore().execute(At.TOOLTIP,{paneId:l,dataIndex:i,kLineData:a,technicalIndicatorData:f})}),e&&this._chartStore.actionStore().execute(At.CROSSHAIR,{paneId:e,coordinate:{x:o,y:c},dataIndex:i,kLineData:a,technicalIndicatorData:s})}}},{key:"_separatorStartDrag",value:function(t,n){this._separatorDragStartTopPaneHeight=this._panes.get(t).height(),this._separatorDragStartBottomPaneHeight=this._panes.get(n).height()}},{key:"_separatorDrag",value:function(t,n,e){var i=this._separatorDragStartTopPaneHeight+t,a=this._separatorDragStartBottomPaneHeight-t;i>this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight&&(i=this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight,a=0),0>i&&(i=0,a=this._separatorDragStartTopPaneHeight+this._separatorDragStartBottomPaneHeight),this._panes.get(n).setHeight(i),this._panes.get(e).setHeight(a),this._chartStore.actionStore().execute(At.PANE_DRAG,{topPaneId:n,bottomPaneId:e,topPaneHeight:i,bottomPaneHeight:a}),this.adjustPaneViewport(!0,!0,!0,!0,!0)}},{key:"_invalidatePane",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ve;if(t===ut)this._xAxisPane.invalidate(t),this._panes.forEach(function(e){e.invalidate(t)});else{var n=!1;this._panes.forEach(function(e){var i=e.yAxis().computeAxis();i&&(n=i)}),this.adjustPaneViewport(!1,n,!0)}}},{key:"_measurePaneHeight",value:function(){var t=this,n=this._chartStore.styleOptions(),e=this._container.offsetHeight,i=n.separator.size,a=i*this._separators.size,o=this._xAxisPane.xAxis().getSelfHeight(),c=e-o-a,s=0;this._panes.forEach(function(d){if(d.id()!==nt){var v=d.height();s+v>c?(d.setHeight(c-s),s=c):s+=v}});var h=c-s,l={};l.candle_pane={contentTop:0,contentBottom:h};var u=h,f=h;this._panes.get(nt).setHeight(h),this._chartHeight.candle_pane=h,this._panes.forEach(function(d){if(d.id()!==nt){var v=d.height();f+=v+i,l[d.id()]={contentTop:u,contentBottom:f},t._chartHeight[d.id()]=v,u=f}}),this._xAxisPane.setHeight(o),this._chartHeight.xAxis=o,this._chartHeight.total=e,this._chartEvent.setPaneContentSize(l),this._chartEvent.setChartContentTopBottom({contentTop:0,contentBottom:f})}},{key:"_measurePaneWidth",value:function(){var t,n,e,i=this,a=this._chartStore.styleOptions().yAxis,o=a.position===Ut,c=this._container.offsetWidth,s=Number.MIN_SAFE_INTEGER;a.inside?(t=c,s=c,n=0,e=0):(this._panes.forEach(function(h){s=Math.max(s,h.yAxis().getSelfWidth())}),t=c-s,o?(n=0,e=s):(e=0,n=c-s)),this._chartStore.timeScaleStore().setTotalDataSpace(t),this._panes.forEach(function(h,l){h.setWidth(t,s),h.setOffsetLeft(e,n);var u=i._separators.get(l);u&&u.setSize(e,t)}),this._chartWidth={content:t,yAxis:s,total:c},this._xAxisPane.setWidth(t,s),this._xAxisPane.setOffsetLeft(e,n),this._chartEvent.setChartContentLeftRight({contentLeft:e,contentRight:e+t})}},{key:"adjustPaneViewport",value:function(t,n,e,i,a){t&&this._measurePaneHeight();var o=!1;i&&this._panes.forEach(function(c){var s=c.yAxis().computeAxis(a);o||(o=s)}),(!i&&n||i&&o)&&this._measurePaneWidth(),e&&(this._xAxisPane.xAxis().computeAxis(!0),this._xAxisPane.layout(),this._panes.forEach(function(c){c.layout()}))}},{key:"hasPane",value:function(t){return this._panes.has(t)}},{key:"getPane",value:function(t){return this._panes.get(t)}},{key:"chartStore",value:function(){return this._chartStore}},{key:"removeTechnicalIndicator",value:function(t,n){var e=this;if(this._chartStore.technicalIndicatorStore().removeInstance(t,n)){var i=!1;if(t!==nt&&!this._chartStore.technicalIndicatorStore().hasInstance(t)){i=!0,this._panes.get(t).destroy();var a=this._separators.get(t).topPaneId();this._separators.get(t).destroy(),this._panes.delete(t),this._separators.delete(t),this._separators.forEach(function(o){var c=o.topPaneId();e._separators.has(c)||o.updatePaneId(a)})}this.adjustPaneViewport(i,!0,!0,!0,!0)}}},{key:"createTechnicalIndicator",value:function(t,n){var e=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this._panes.has(i.id)){var a=this._chartStore.technicalIndicatorStore().addInstance(i.id,t,n);return a&&a.finally(function(l){e.setPaneOptions(i,e._panes.get(i.id).yAxis().computeAxis(!0))}),i.id}var o=i.id||"".concat(Mr).concat(++this._paneBaseId),c=!bt(i.dragEnabled)||i.dragEnabled;this._separators.set(o,new dr(this._chartContainer,this._chartStore,Array.from(this._panes.keys()).pop(),o,c,{startDrag:this._separatorStartDrag.bind(this),drag:Pr(this._separatorDrag.bind(this),50)}));var s=new Nn({container:this._chartContainer,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),id:o,height:i.height||100});this._panes.set(o,s);var h=this._chartStore.technicalIndicatorStore().addInstance(o,t,n);return h&&h.finally(function(l){e.adjustPaneViewport(!0,!0,!0,!0,!0)}),o}},{key:"createShape",value:function(t,n,e){var i=n.points,a=n.styles,o=n.lock,c=n.mode,s=n.data,h=n.onDrawStart,l=n.onDrawing,u=n.onDrawEnd,f=n.onClick,d=n.onRightClick,v=n.onPressedMove,p=n.onMouseEnter,_=n.onMouseLeave,m=n.onRemove,y=n.id||"".concat("shape_").concat(++this._shapeBaseId);if(!this._chartStore.shapeStore().hasInstance(y)){var g=null;this.hasPane(e)?g=this._panes.get(e).yAxis():i&&i.length>0&&(e=nt,g=this._panes.get(nt).yAxis());var k=new t({id:y,chartStore:this._chartStore,xAxis:this._xAxisPane.xAxis(),yAxis:g,points:i,styles:a,lock:o,mode:c,data:s});return W(h)&&h({id:y}),vn(k,[{key:"onDrawing",fn:l},{key:"onDrawEnd",fn:u},{key:"onClick",fn:f},{key:"onRightClick",fn:d},{key:"onPressedMove",fn:v},{key:"onMouseEnter",fn:p},{key:"onMouseLeave",fn:_},{key:"onRemove",fn:m}]),this._chartStore.shapeStore().addInstance(k,e),y}return null}},{key:"createAnnotation",value:function(t,n){var e=this,i=[];t.forEach(function(a){var o=a.point,c=a.styles,s=a.checkEventCoordinateOnCustomSymbol,h=a.drawCustomSymbol,l=a.drawExtend,u=a.onClick,f=a.onRightClick,d=a.onMouseEnter,v=a.onMouseLeave;if(o&&o.timestamp){var p=new Ar({id:o.timestamp,chartStore:e._chartStore,point:o,xAxis:e._xAxisPane.xAxis(),yAxis:e._panes.get(n).yAxis(),styles:c});vn(p,[{key:"drawExtend",fn:l},{key:"drawCustomSymbol",fn:h},{key:"checkEventCoordinateOnCustomSymbol",fn:s},{key:"onClick",fn:u},{key:"onRightClick",fn:f},{key:"onMouseEnter",fn:d},{key:"onMouseLeave",fn:v}]),i.push(p)}}),i.length>0&&this._chartStore.annotationStore().add(i,n)}},{key:"createTag",value:function(t,n){var e=this,i=[],a=!1,o=!1;t.forEach(function(c){var s=c.id,h=c.point,l=c.text,u=c.mark,f=c.styles;if(P(s))if(e._chartStore.tagStore().has(s,n)){var d=e._chartStore.tagStore().update(s,n,{point:h,text:l,mark:u,styles:f});a||(a=d)}else o=!0,i.push(new Tr({id:s,point:h,text:l,mark:u,styles:f,chartStore:e._chartStore,xAxis:e._xAxisPane.xAxis(),yAxis:e._panes.get(n).yAxis()}))}),o?this._chartStore.tagStore().add(i,n):a&&this._invalidatePane(ut)}},{key:"removeAllHtml",value:function(){this._panes.forEach(function(t){t.removeHtml()}),this._xAxisPane.removeHtml()}},{key:"setPaneOptions",value:function(t,n){var e=n,i=!1;if(t.id!==nt){var a=this._panes.get(t.id);a&&(O(t.height)&&t.height>0&&a.height()!==t.height&&(e=!0,a.setHeight(t.height),i=!0),bt(t.dragEnabled)&&this._separators.get(t.id).setDragEnabled(t.dragEnabled))}e&&this.adjustPaneViewport(i,!0,!0,!0,!0)}},{key:"setTimezone",value:function(t){this._chartStore.timeScaleStore().setTimezone(t),this._xAxisPane.xAxis().computeAxis(!0),this._xAxisPane.invalidate(Ve)}},{key:"convertToPixel",value:function(t,n){var e,i=this,a=n.paneId,o=a===void 0?nt:a,c=n.absoluteYAxis,s=[].concat(t),h=[],l=this._chartStore.styleOptions().separator.size,u=0,f=Qn(this._panes.values());try{var d=function(){var v=e.value;if(v.id()===o)return h=s.map(function(p){var _=p.timestamp,m=p.value,y={},g=p.dataIndex;if(P(_)&&(g=i._chartStore.timeScaleStore().timestampToDataIndex(_)),P(g)&&(y.x=i._xAxisPane.xAxis().convertToPixel(g)),P(m)){var k=v.yAxis().convertToPixel(m);y.y=c?u+k:k}return y}),"break";u+=v.height()+l};for(f.s();!(e=f.n()).done&&d()!=="break";);}catch(v){f.e(v)}finally{f.f()}return V(t)?h:h[0]||{}}},{key:"convertFromPixel",value:function(t,n){var e,i=this,a=n.paneId,o=a===void 0?nt:a,c=n.absoluteYAxis,s=[].concat(t),h=[],l=this._chartStore.styleOptions().separator.size,u=0,f=Qn(this._panes.values());try{var d=function(){var v=e.value;if(v.id()===o)return h=s.map(function(p){var _=p.x,m=p.y,y={};if(P(_)&&(y.dataIndex=i._xAxisPane.xAxis().convertFromPixel(_),y.timestamp=i._chartStore.timeScaleStore().dataIndexToTimestamp(y.dataIndex)),P(m)){var g=c?m-u:m;y.value=v.yAxis().convertFromPixel(g)}return y}),"break";u+=v.height()+l};for(f.s();!(e=f.n()).done&&d()!=="break";);}catch(v){f.e(v)}finally{f.f()}return V(t)?h:h[0]||{}}},{key:"chartWidth",value:function(){return this._chartWidth}},{key:"chartHeight",value:function(){return this._chartHeight}},{key:"getConvertPictureUrl",value:function(t,n,e){var i=this,a=this._chartContainer.offsetWidth,o=this._chartContainer.offsetHeight,c=ft("canvas",{width:"".concat(a,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=c.getContext("2d"),h=qt(c);c.width=a*h,c.height=o*h,s.scale(h,h),s.fillStyle=e,s.fillRect(0,0,a,o);var l=0;return this._panes.forEach(function(u,f){if(f!==nt){var d=i._separators.get(f);s.drawImage(d.getImage(),0,l,a,d.height()),l+=d.height()}s.drawImage(u.getImage(t),0,l,a,u.height()),l+=u.height()}),s.drawImage(this._xAxisPane.getImage(t),0,l,a,this._xAxisPane.height()),c.toDataURL("image/".concat(n))}},{key:"destroy",value:function(){this._panes.forEach(function(t){t.destroy()}),this._separators.forEach(function(t){t.destroy()}),this._panes.clear(),this._separators.clear(),this._xAxisPane.destroy(),this._container.removeChild(this._chartContainer),this._chartEvent.destroy()}}]),r}(),ei=function(){function r(t,n){E(this,r),this._chartPane=new Or(t,n)}return I(r,[{key:"getWidth",value:function(){return this._chartPane.chartWidth()}},{key:"getHeight",value:function(){return this._chartPane.chartHeight()}},{key:"setStyleOptions",value:function(t){R(t)&&(this._chartPane.chartStore().applyStyleOptions(t),this._chartPane.adjustPaneViewport(!0,!0,!0,!0,!0))}},{key:"getStyleOptions",value:function(){return Z(this._chartPane.chartStore().styleOptions())}},{key:"setPriceVolumePrecision",value:function(t,n){O(t)&&t>=0&&O(n)&&n>=0&&this._chartPane.chartStore().setPriceVolumePrecision(t,n)}},{key:"setTimezone",value:function(t){this._chartPane.setTimezone(t)}},{key:"getTimezone",value:function(){return this._chartPane.chartStore().timeScaleStore().timezone()}},{key:"resize",value:function(){this._chartPane.adjustPaneViewport(!0,!0,!0,!0,!0)}},{key:"setOffsetRightSpace",value:function(t){O(t)&&this._chartPane.chartStore().timeScaleStore().setOffsetRightSpace(t,!0)}},{key:"setLeftMinVisibleBarCount",value:function(t){O(t)&&t>0&&this._chartPane.chartStore().timeScaleStore().setLeftMinVisibleBarCount(Math.ceil(t))}},{key:"setRightMinVisibleBarCount",value:function(t){O(t)&&t>0&&this._chartPane.chartStore().timeScaleStore().setRightMinVisibleBarCount(Math.ceil(t))}},{key:"setDataSpace",value:function(t){O(t)&&this._chartPane.chartStore().timeScaleStore().setDataSpace(t)}},{key:"getDataSpace",value:function(){return this._chartPane.chartStore().timeScaleStore().dataSpace()}},{key:"getBarSpace",value:function(){return this._chartPane.chartStore().timeScaleStore().barSpace()}},{key:"clearData",value:function(){this._chartPane.chartStore().clearDataList()}},{key:"getDataList",value:function(){return this._chartPane.chartStore().dataList()}},{key:"applyNewData",value:function(t,n){var e=this;if(V(t)){var i=this._chartPane.chartStore();i.clearDataList(),i.addData(t,0,n),i.technicalIndicatorStore().calcInstance().finally(function(a){e._chartPane.adjustPaneViewport(!1,!0,!0,!0)})}}},{key:"applyMoreData",value:function(t,n){var e=this;if(V(t)){var i=this._chartPane.chartStore();i.addData(t,0,n),i.technicalIndicatorStore().calcInstance().finally(function(a){e._chartPane.adjustPaneViewport(!1,!0,!0,!0)})}}},{key:"updateData",value:function(t){var n=this;if(R(t)&&!V(t)){var e=this._chartPane.chartStore(),i=e.dataList(),a=i.length,o=gt(t,"timestamp",0),c=gt(i[a-1],"timestamp",0);if(o>=c){var s=a;o===c&&(s=a-1),e.addData(t,s),e.technicalIndicatorStore().calcInstance().finally(function(h){n._chartPane.adjustPaneViewport(!1,!0,!0,!0)})}}}},{key:"loadMore",value:function(t){W(t)&&this._chartPane.chartStore().timeScaleStore().setLoadMoreCallback(t)}},{key:"createTechnicalIndicator",value:function(t,n,e){if(!P(t))return null;var i=R(t)&&!V(t)?t:{name:t};return this._chartPane.chartStore().technicalIndicatorStore().hasTemplate(i.name)?this._chartPane.createTechnicalIndicator(i,n,e):null}},{key:"addTechnicalIndicatorTemplate",value:function(t){if(R(t)){var n=[].concat(t);this._chartPane.chartStore().technicalIndicatorStore().addTemplate(n)}}},{key:"overrideTechnicalIndicator",value:function(t,n){var e=this;if(R(t)&&!V(t)){var i=this._chartPane.chartStore().technicalIndicatorStore().override(t,n);i&&i.then(function(a){e._chartPane.adjustPaneViewport(!1,!0,!0,!0)})}}},{key:"getTechnicalIndicatorTemplate",value:function(t){return this._chartPane.chartStore().technicalIndicatorStore().getTemplateInfo(t)}},{key:"getTechnicalIndicatorByPaneId",value:function(t,n){return this._chartPane.chartStore().technicalIndicatorStore().getInstanceInfo(t,n)}},{key:"removeTechnicalIndicator",value:function(t,n){this._chartPane.removeTechnicalIndicator(t,n)}},{key:"addShapeTemplate",value:function(t){if(R(t)){var n=[].concat(t);this._chartPane.chartStore().shapeStore().addTemplate(n)}}},{key:"createShape",value:function(t,n){if(!P(t))return null;var e=R(t)&&!V(t)?t:{name:t},i=this._chartPane.chartStore().shapeStore().getTemplate(e.name);return i?this._chartPane.createShape(i,e,n):null}},{key:"getShape",value:function(t){return this._chartPane.chartStore().shapeStore().getInstanceInfo(t)}},{key:"setShapeOptions",value:function(t){R(t)&&!V(t)&&this._chartPane.chartStore().shapeStore().setInstanceOptions(t)}},{key:"removeShape",value:function(t){this._chartPane.chartStore().shapeStore().removeInstance(t)}},{key:"createAnnotation",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt;if(R(t)&&this._chartPane.hasPane(n)){var e=[].concat(t);this._chartPane.createAnnotation(e,n)}}},{key:"removeAnnotation",value:function(t,n){this._chartPane.chartStore().annotationStore().remove(t,n)}},{key:"createTag",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt;if(R(t)&&this._chartPane.hasPane(n)){var e=[].concat(t);this._chartPane.createTag(e,n)}}},{key:"removeTag",value:function(t,n){this._chartPane.chartStore().tagStore().remove(t,n)}},{key:"createHtml",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt;if(!R(t)||!(ie(t.content)||t.content instanceof HTMLElement))return null;var e=this._chartPane.getPane(n);return e?e.createHtml(t):null}},{key:"removeHtml",value:function(t,n){if(t){var e=this._chartPane.getPane(t);e&&e.removeHtml(n)}else this._chartPane.removeAllHtml()}},{key:"setPaneOptions",value:function(t){R(t)&&this._chartPane.setPaneOptions(t,!1)}},{key:"setZoomEnabled",value:function(t){this._chartPane.chartStore().timeScaleStore().setZoomEnabled(t)}},{key:"isZoomEnabled",value:function(){return this._chartPane.chartStore().timeScaleStore().zoomEnabled()}},{key:"setScrollEnabled",value:function(t){this._chartPane.chartStore().timeScaleStore().setScrollEnabled(t)}},{key:"isScrollEnabled",value:function(){return this._chartPane.chartStore().timeScaleStore().scrollEnabled()}},{key:"scrollByDistance",value:function(t,n){var e=this;if(O(t))if(O(n)&&n>0){this._chartPane.chartStore().timeScaleStore().startScroll();var i=new Date().getTime();(function a(){var o=(new Date().getTime()-i)/n,c=o>=1,s=c?t:t*o;e._chartPane.chartStore().timeScaleStore().scroll(s),c||He(a)})()}else this._chartPane.chartStore().timeScaleStore().startScroll(),this._chartPane.chartStore().timeScaleStore().scroll(t)}},{key:"scrollToRealTime",value:function(t){var n=(this._chartPane.chartStore().timeScaleStore().offsetRightBarCount()-this._chartPane.chartStore().timeScaleStore().offsetRightSpace()/this._chartPane.chartStore().timeScaleStore().dataSpace())*this._chartPane.chartStore().timeScaleStore().dataSpace();this.scrollByDistance(n,t)}},{key:"scrollToDataIndex",value:function(t,n){if(O(t)){var e=(this._chartPane.chartStore().dataList().length-1-t)*this._chartPane.chartStore().timeScaleStore().dataSpace();this.scrollByDistance(e,n)}}},{key:"zoomAtCoordinate",value:function(t,n,e){var i=this;if(O(t))if(O(e)&&e>0){var a=this._chartPane.chartStore().timeScaleStore().dataSpace(),o=a*t-a,c=new Date().getTime();(function s(){var h=(new Date().getTime()-c)/e,l=h>=1,u=l?o:o*h;i._chartPane.chartStore().timeScaleStore().zoom(u/a,n),l||He(s)})()}else this._chartPane.chartStore().timeScaleStore().zoom(t,n)}},{key:"zoomAtDataIndex",value:function(t,n,e){if(O(t)&&O(n)){var i=this._chartPane.chartStore().timeScaleStore().dataIndexToCoordinate(n);this.zoomAtCoordinate(t,{x:i},e)}}},{key:"convertToPixel",value:function(t,n){return this._chartPane.convertToPixel(t,n)}},{key:"convertFromPixel",value:function(t,n){return this._chartPane.convertFromPixel(t,n)}},{key:"subscribeAction",value:function(t,n){this._chartPane.chartStore().actionStore().subscribe(t,n)}},{key:"unsubscribeAction",value:function(t,n){this._chartPane.chartStore().actionStore().unsubscribe(t,n)}},{key:"getConvertPictureUrl",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"jpeg",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"#FFFFFF";if(n==="png"||n==="jpeg"||n==="bmp")return this._chartPane.getConvertPictureUrl(t,n,e)}},{key:"destroy",value:function(){this._chartPane.destroy()}}]),r}(),xe={},Dr=1,Lr="k_line_chart_",Rr={clone:Z,merge:Et,isString:ie,isNumber:O,isValid:P,isObject:R,isArray:V,isFunction:W,isBoolean:bt,formatValue:gt,formatPrecision:xt,formatBigNumber:Ft};L.addTechnicalIndicatorTemplate([{name:"AVP",shortName:"AVP",series:"price",precision:2,plots:[{key:"avp",title:"AVP: ",type:"line"}],calcTechnicalIndicator:function(r){var t=0,n=0;return r.map(function(e){var i={};return t+=e.turnover||0,(n+=e.volume||0)!==0&&(i.avp=t/n),i})}},Lt,Xt,q,{name:"EMV",shortName:"EMV",calcParams:[14,9],plots:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=[],o=[];return r.forEach(function(c,s){var h={},l=r[s-1]||c,u=c.high,f=c.low,d=c.turnover||0,v=0;d!==0&&(v=((u+f)/2-(l.high+l.low)/2)*(u-f)/d),a.push(v),e+=v,n[0]-1>s||(h.emv=e,e-=a[s-(n[0]-1)],i+=h.emv,n[0]+n[1]-2>s||(h.maEmv=i/n[1],i-=o[s-(n[1]-1)].emv)),o.push(h)}),o}},{name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ema6",title:"EMA6: ",type:"line"},{key:"ema12",title:"EMA12: ",type:"line"},{key:"ema20",title:"EMA20: ",type:"line"}],regeneratePlots:function(r){return r.map(function(t){return{key:"ema".concat(t),title:"EMA".concat(t,": "),type:"line"}})},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots,i=0,a=[];return r.map(function(o,c){var s={},h=o.close;return i+=h,n.forEach(function(l,u){l-1>c||(a[u]=c>l-1?(2*h+(l-1)*a[u])/(l+1):i/l,s[e[u].key]=a[u])}),s})}},{name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldCheckParamCount:!1,shouldOhlc:!0,plots:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regeneratePlots:function(r){return r.map(function(t){return{key:"ma".concat(t),title:"MA".concat(t,": "),type:"line"}})},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots,i=[];return r.map(function(a,o){var c={},s=a.close;return n.forEach(function(h,l){i[l]=(i[l]||0)+s,h-1>o||(c[e[l].key]=i[l]/h,i[l]-=r[o-(h-1)].close)}),c})}},pt,{name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,plots:[{key:"sma",title:"SMA: ",type:"line"}],shouldCheckParamCount:!0,shouldOhlc:!0,calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0;return r.map(function(a,o){var c={},s=a.close;return e+=s,n[0]-1>o||(c.sma=i=o>n[0]-1?(s*n[1]+i*(n[0]-n[1]+1))/(n[0]+1):e/n[0]),c})}},{name:"TRIX",shortName:"TRIX",calcParams:[12,9],plots:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n,e,i,a=t.params,o=0,c=0,s=0,h=0,l=[];return r.forEach(function(u,f){var d={},v=u.close;if(o+=v,f>=a[0]-1&&(c+=n=f>a[0]-1?(2*v+(a[0]-1)*n)/(a[0]+1):o/a[0],f>=2*a[0]-2&&(s+=e=f>2*a[0]-2?(2*n+(a[0]-1)*e)/(a[0]+1):c/a[0],f>=3*a[0]-3))){var p,_=0;f>3*a[0]-3?_=((p=(2*e+(a[0]-1)*i)/(a[0]+1))-i)/i*100:p=s/a[0],i=p,d.trix=_,h+=_,3*a[0]+a[1]-4>f||(d.maTrix=h/a[1],h-=l[f-(a[1]-1)].trix)}l.push(d)}),l}},{name:"BRAR",shortName:"BRAR",calcParams:[26],plots:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=0,o=0;return r.map(function(c,s){var h={},l=c.high,u=c.low,f=c.open,d=(r[s-1]||c).close;if(a+=l-f,o+=f-u,e+=l-d,i+=d-u,s>=n[0]-1){h.ar=o!==0?a/o*100:0,h.br=i!==0?e/i*100:0;var v=r[s-(n[0]-1)],p=v.high,_=v.low,m=v.open,y=(r[s-n[0]]||r[s-(n[0]-1)]).close;e-=p-y,i-=y-_,a-=p-m,o-=m-_}return h})}},ke,{name:"MTM",shortName:"MTM",calcParams:[12,6],plots:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=[];return r.forEach(function(a,o){var c={};o<n[0]||(c.mtm=a.close-r[o-n[0]].close,e+=c.mtm,n[0]+n[1]-1>o||(c.maMtm=e/n[1],e-=i[o-(n[1]-1)].mtm)),i.push(c)}),i}},{name:"PSY",shortName:"PSY",calcParams:[12,6],plots:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=[],o=[];return r.forEach(function(c,s){var h={},l=c.close-(r[s-1]||c).close>0?1:0;a.push(l),e+=l,n[0]-1>s||(h.psy=e/n[0]*100,i+=h.psy,n[0]+n[1]-2>s||(h.maPsy=i/n[1],i-=o[s-(n[1]-1)].psy),e-=a[s-(n[0]-1)]),o.push(h)}),o}},{name:"ROC",shortName:"ROC",calcParams:[12,6],shouldCheckParamCount:!0,plots:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=[],i=0;return r.forEach(function(a,o){var c={};if(o>=n[0]-1){var s=(r[o-n[0]]||r[o-(n[0]-1)]).close;c.roc=s!==0?(a.close-s)/s*100:0,i+=c.roc,n[0]-1+n[1]-1>o||(c.maRoc=i/n[1],i-=e[o-(n[1]-1)].roc)}e.push(c)}),e}},{name:"VR",shortName:"VR",calcParams:[26,6],plots:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=0,o=0,c=[];return r.forEach(function(s,h){var l={},u=s.close,f=(r[h-1]||s).close,d=s.volume;if(u>f?e+=d:f>u?i+=d:a+=d,h>=n[0]-1){var v=a/2;l.vr=i+v===0?0:(e+v)/(i+v)*100,o+=l.vr,n[0]+n[1]-2>h||(l.maVr=o/n[1],o-=c[h-(n[1]-1)].vr);var p=r[h-(n[0]-1)],_=r[h-n[0]]||p,m=p.close,y=p.volume;m>_.close?e-=y:_.close>m?i-=y:a-=y}c.push(l)}),c}},be,{name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],shouldCheckParamCount:!1,plots:[{key:"bias6",title:"BIAS6: ",type:"line"},{key:"bias12",title:"BIAS12: ",type:"line"},{key:"bias24",title:"BIAS24: ",type:"line"}],regeneratePlots:function(r){return r.map(function(t){return{key:"bias".concat(t),title:"BIAS".concat(t,": "),type:"line"}})},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots,i=[];return r.map(function(a,o){var c={},s=a.close;return n.forEach(function(h,l){if(i[l]=(i[l]||0)+s,o>=h-1){var u=i[l]/n[l];c[e[l].key]=(s-u)/u*100,i[l]-=r[o-(h-1)].close}}),c})}},_t,ot,$,yt,ne,Gt,{name:"OBV",shortName:"OBV",calcParams:[30],plots:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calcTechnicalIndicator:function(r,t){var n=t.params,e=0,i=0,a=[];return r.forEach(function(o,c){var s=r[c-1]||o;s.close>o.close?i-=o.volume:o.close>s.close&&(i+=o.volume);var h={obv:i};e+=i,n[0]-1>c||(h.maObv=e/n[0],e-=a[c-(n[0]-1)].obv),a.push(h)}),a}},{name:"PVT",shortName:"PVT",plots:[{key:"pvt",title:"PVT: ",type:"line"}],calcTechnicalIndicator:function(r){var t=0;return r.map(function(n,e){var i={},a=(r[e-1]||n).close,o=0;return a!==0&&(o=(n.close-a)/a*n.volume),i.pvt=t+=o,i})}},{name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldCheckParamCount:!1,shouldFormatBigNumber:!0,precision:0,minValue:0,plots:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma20",title:"MA20: ",type:"line"},{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,color:function(r,t){var n=r.current.kLineData||{};return n.close>n.open?t.bar.upColor:n.open>n.close?t.bar.downColor:t.bar.noChangeColor}}],regeneratePlots:function(r){var t=r.map(function(n){return{key:"ma".concat(n),title:"MA".concat(n,": "),type:"line"}});return t.push({key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,color:function(n,e){var i=n.current.kLineData||{};return i.close>i.open?e.bar.upColor:i.open>i.close?e.bar.downColor:e.bar.noChangeColor}}),t},calcTechnicalIndicator:function(r,t){var n=t.params,e=t.plots,i=[];return r.map(function(a,o){var c=a.volume||0,s={volume:c};return n.forEach(function(h,l){i[l]=(i[l]||0)+c,h-1>o||(s[e[l].key]=i[l]/h,i[l]-=r[o-(h-1)].volume)}),s})}}]),L.addShapeTemplate([{name:"horizontalRayLine",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return _e(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n={x:0,y:t[0].y};return t[1]&&t[1].x>t[0].x&&(n.x=r.viewport.width),[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[t[0],n]]}]},performEventPressedMove:function(r){var t=r.points,n=r.pressPoint;t[0].value=n.value,t[1].value=n.value},performEventMoveForDrawing:function(r){r.step===2&&(r.points[0].value=r.movePoint.value)}},{name:"horizontalSegment",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return Fe(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n=[];return t.length===2&&(n=[t]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:n}]},performEventPressedMove:function(r){var t=r.points,n=r.pressPoint;t[0].value=n.value,t[1].value=n.value},performEventMoveForDrawing:function(r){r.step===2&&(r.points[0].value=r.movePoint.value)}},{name:"horizontalStraightLine",totalStep:2,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:0,y:t[0].y},{x:r.viewport.width,y:t[0].y}]]}]}},{name:"verticalRayLine",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return _e(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n={x:t[0].x,y:0};return t[1]&&t[1].y>t[0].y&&(n.y=r.viewport.height),[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[t[0],n]]}]},performEventPressedMove:function(r){var t=r.points,n=r.pressPoint;t[0].timestamp=n.timestamp,t[0].dataIndex=n.dataIndex,t[1].timestamp=n.timestamp,t[1].dataIndex=n.dataIndex},performEventMoveForDrawing:function(r){var t=r.points,n=r.movePoint;r.step===2&&(t[0].timestamp=n.timestamp,t[0].dataIndex=n.dataIndex)}},{name:"verticalSegment",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return Fe(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n=[];return t.length===2&&(n=[t]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:n}]},performEventPressedMove:function(r){var t=r.points,n=r.pressPoint;t[0].timestamp=n.timestamp,t[0].dataIndex=n.dataIndex,t[1].timestamp=n.timestamp,t[1].dataIndex=n.dataIndex},performEventMoveForDrawing:function(r){var t=r.points,n=r.movePoint;r.step===2&&(t[0].timestamp=n.timestamp,t[0].dataIndex=n.dataIndex)}},{name:"verticalStraightLine",totalStep:2,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:t[0].x,y:0},{x:t[0].x,y:r.viewport.height}]]}]}},{name:"rayLine",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return _e(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t,n,e,i=r.coordinates,a=r.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[(t=i[0],n=i[1],e={x:a.width,y:a.height},t&&n?[t,t.x===n.x&&t.y!==n.y?n.y>t.y?{x:t.x,y:e.y}:{x:t.x,y:0}:t.x>n.x?{x:0,y:pe(t,n,{x:0,y:t.y})}:{x:e.x,y:pe(t,n,{x:e.x,y:t.y})}]:[])]}]}},{name:"segment",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return Fe(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n=[];return t.length===2&&(n=[t]),[{type:"line",isDraw:!0,isCheck:!0,dataSource:n}]}},{name:"straightLine",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n=r.viewport;return 2>t.length||t[0].x===t[1].x?[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:t[0].x,y:0},{x:t[0].x,y:n.height}]]}]:[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[{x:0,y:pe(t[0],t[1],{x:0,y:t[0].y})},{x:n.width,y:pe(t[0],t[1],{x:n.width,y:t[0].y})}]]}]}},{name:"parallelStraightLine",totalStep:4,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:mn(r.coordinates,{x:t.width,y:t.height})}]}},{name:"priceChannelLine",totalStep:4,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.viewport;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:mn(r.coordinates,{x:t.width,y:t.height},1)}]}},{name:"priceLine",totalStep:2,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return _e(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.coordinates,n=r.precision;return[{type:"line",isDraw:!0,isCheck:!0,dataSource:[[t[0],{x:r.viewport.width,y:t[0].y}]]},{type:"text",isDraw:!0,isCheck:!1,dataSource:[{x:t[0].x,y:t[0].y,text:r.yAxis.convertFromPixel(t[0].y).toFixed(n.price)}]}]}},{name:"fibonacciLine",totalStep:3,checkEventCoordinateOnShape:function(r){var t=r.dataSource;return It(t[0],t[1],r.eventCoordinate)},createShapeDataSource:function(r){var t=r.points,n=r.coordinates,e=r.precision;if(n.length>0){var i=[],a=[],o=r.viewport.width;if(n.length>1){var c=n[0].y-n[1].y,s=t[0].value-t[1].value;[1,.786,.618,.5,.382,.236,0].forEach(function(h){var l=n[1].y+c*h,u=(t[1].value+s*h).toFixed(e.price);i.push([{x:0,y:l},{x:o,y:l}]),a.push({x:0,y:l,text:"".concat(u," (").concat((100*h).toFixed(1),"%)")})})}return[{type:"line",isDraw:!0,isCheck:!0,dataSource:i},{type:"text",isDraw:!0,isCheck:!1,dataSource:a}]}return[]}}]),St.dispose=function(r){if(r){var t;if(ie(r)){var n=document.getElementById(r);t=n&&n.chartId}else t=r instanceof ei?r.id:r&&r.chartId;t&&(xe[t].destroy(),delete xe[t])}},St.extension=L,St.init=function(r){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r||!(t=ie(r)?document.getElementById(r):r))return null;var e=xe[t.chartId||""];if(e)return e;var i="".concat(Lr).concat(Dr++);return(e=new ei(t,n)).id=i,t.chartId=i,xe[i]=e,e},St.utils=Rr,St.version=function(){return"8.3.6"},Object.defineProperty(St,"__esModule",{value:!0})})})(Ke,Ke.exports);Ze.exports=Ke.exports;const qe=te=>(Nr("data-v-61486579"),te=te(),Yr(),te),Zr={class:"card-header"},Kr=qe(()=>Wt("div",{id:"ohlc-wrapper"},null,-1)),qr=qe(()=>Wt("div",{class:"card-header"},[Wt("span",null,"\u6536\u76CA\u6C47\u603B")],-1)),$r=qe(()=>Wt("div",{class:"card-header"},[Wt("span",null,"\u6536\u76CA\u660E\u7EC6")],-1)),Jr={setup(te){const ee=Wr(),St=ee.params.backtestID,Lt=ee.params.symbol,Xt=parseInt(ee.params.locationTS),q=zr({loading:!0,symbol:Lt,domain:"",currentIndex:0,currentTime:isNaN(Xt)?"ALL":ni(Xt).format("YYYY-MM-DD"),pnls:[],summary:{pnl:0,successes:0,fails:0,profit:0,loss:0}});let pt;function ke(_t){isNaN(_t)||(pt.createShape({name:"verticalStraightLine",lock:!0,points:[{timestamp:_t,value:0}],styles:{line:{color:"#666",size:1,style:"dash"}}}),pt.scrollToDataIndex(q.currentIndex+100))}function be(_t){const ot=_t.filter($=>$.pnl>=0),mt=_t.filter($=>$.pnl<0);q.summary={successes:ot.length,fails:mt.length,profit:ot.reduce(($,yt)=>$+yt.pnl,0).toFixed(4),loss:mt.reduce(($,yt)=>$+yt.pnl,0).toFixed(4),pnl:_t.reduce(($,yt)=>$+yt.pnl,0).toFixed(4)}}return Vr(async()=>{pt=Ze.exports.init("ohlc-wrapper"),pt.setPriceVolumePrecision(4,4);const _t=await Gr(St),ot={};_t.holdings.forEach(L=>{if(Object.keys(L[2]).includes(Lt)){const E=L[0]*1e3;ot[E]={timestamp:E}}});const mt=Object.keys(ot).map(L=>parseInt(L)),{domain:$,data:yt}=await Ur(St,Lt);q.domain=$;const ne=yt.map((L,E)=>{const kt=L[1]*1e3;return kt==Xt&&(q.currentIndex=E),mt.includes(kt)&&(ot[kt].openPrice=L[2],ot[kt].pnl=(L[5]-L[2])/L[2]),{timestamp:kt,open:L[2],high:L[3],low:L[4],close:L[5],volume:L[6]}});pt.applyNewData(ne),q.pnls=Object.values(ot).map(L=>({date:ni(L.timestamp).format("YYYY-MM-DD"),price:L.openPrice,pnl:L.pnl.toFixed(4)})),be(Object.values(ot)),pt.createTechnicalIndicator("MACD",!1,{height:120,dragEnabled:!1}),pt.overrideTechnicalIndicator({name:"MACD",calcParams:[12,26,9]});const Gt=Object.values(ot).map(L=>[{point:{timestamp:L.timestamp,value:L.openPrice},styles:{position:"point",offset:[0,0],symbol:{size:10,color:"#5470C6",type:"circle"}}},{point:{timestamp:L.timestamp,value:L.openPrice},styles:{position:"top",offset:[0,0],symbol:{size:10,color:"#EF340C"}}}]);pt.createAnnotation(Gt.flat()),ke(Xt),q.loading=!1}),jr(()=>{Ze.exports.dispose(pt)}),(_t,ot)=>{const mt=Ct("el-card"),$=Ct("el-col"),yt=Ct("el-descriptions-item"),ne=Ct("el-descriptions"),Gt=Ct("el-table-column"),L=Ct("el-table"),E=Ct("el-space"),kt=Ct("el-row"),I=Ct("el-main"),Rt=Hr("loading");return Yt(),he(I,null,{default:at(()=>[Ot(kt,{gutter:10},{default:at(()=>[Ot($,{span:18},{default:at(()=>[ii((Yt(),he(mt,{shadow:"never"},{header:at(()=>[Wt("div",Zr,[Wt("span",null,Se(Dt(q).symbol)+"("+Se(Dt(q).domain)+") at ("+Se(Dt(q).currentTime)+") ",1)])]),default:at(()=>[Kr]),_:1})),[[Rt,Dt(q).loading]])]),_:1}),Ot($,{span:6},{default:at(()=>[Ot(E,{fill:!0,style:{width:"100%"}},{default:at(()=>[Ot(mt,{shadow:"never",class:"box-card"},{header:at(()=>[qr]),default:at(()=>[Ot(ne,{column:1,border:""},{default:at(()=>[(Yt(!0),ri(oi,null,ai(Dt(q).summary,(Et,Z)=>(Yt(),he(yt,{label:Z},{default:at(()=>[Xr(Se(Et),1)]),_:2},1032,["label"]))),256))]),_:1})]),_:1}),Ot(mt,{shadow:"never"},{header:at(()=>[$r]),default:at(()=>[ii((Yt(),he(L,{data:Dt(q).pnls,width:"100%",border:"",class:"monospaced"},{default:at(()=>[Ot(Gt,{type:"index",width:"50"}),(Yt(!0),ri(oi,null,ai(Dt(q).pnls[0]||{},(Et,Z)=>(Yt(),he(Gt,{prop:Z,label:Z,key:Z,sortable:""},null,8,["prop","label"]))),128))]),_:1},8,["data"])),[[Rt,Dt(q).loading]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};var ea=Fr(Jr,[["__scopeId","data-v-61486579"]]);export{ea as default};
